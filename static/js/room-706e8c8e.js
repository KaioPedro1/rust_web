var Et=Object.defineProperty;var Ct=(t,e,n)=>e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var K=(t,e,n)=>(Ct(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function M(){}function we(t,e){for(const n in e)t[n]=e[n];return t}function Rt(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function kt(t){return t()}function Me(){return Object.create(null)}function Z(t){t.forEach(kt)}function vt(t){return typeof t=="function"}function D(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ge;function J(t,e){return ge||(ge=document.createElement("a")),ge.href=e,t===ge.href}function jt(t){return Object.keys(t).length===0}function wt(t,...e){if(t==null)return M;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ht(t){let e;return wt(t,n=>e=n)(),e}function A(t,e,n){t.$$.on_destroy.push(wt(e,n))}function te(t,e,n,l){if(t){const r=St(t,e,n,l);return t[0](r)}}function St(t,e,n,l){return t[1]&&l?we(n.ctx.slice(),t[1](l(e))):n.ctx}function ne(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let i=0;i<o;i+=1)s[i]=e.dirty[i]|r[i];return s}return e.dirty|r}return e.dirty}function le(t,e,n,l,r,s){if(r){const o=St(e,n,l,s);t.p(o,r)}}function re(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Fe(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Nt(t){const e={};for(const n in t)e[n]=!0;return e}function $(t,e,n){return t.set(n),e}function P(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function fe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function Y(t){return document.createTextNode(t)}function z(){return Y(" ")}function ye(){return Y("")}function Q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Mt(t){return t===""?null:+t}function Ft(t){return Array.from(t.childNodes)}function Se(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ze(t,e){t.value=e??""}function Oe(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}let ue;function X(t){ue=t}function Re(){if(!ue)throw new Error("Function called outside component initialization");return ue}function zt(t,e){return Re().$$.context.set(t,e),e}function je(t){return Re().$$.context.get(t)}function Ot(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const ie=[],Ae=[],he=[],Ie=[],At=Promise.resolve();let Pe=!1;function It(){Pe||(Pe=!0,At.then(He))}function Le(t){he.push(t)}const ke=new Set;let se=0;function He(){if(se!==0)return;const t=ue;do{try{for(;se<ie.length;){const e=ie[se];se++,X(e),Tt(e.$$)}}catch(e){throw ie.length=0,se=0,e}for(X(null),ie.length=0,se=0;Ae.length;)Ae.pop()();for(let e=0;e<he.length;e+=1){const n=he[e];ke.has(n)||(ke.add(n),n())}he.length=0}while(ie.length);for(;Ie.length;)Ie.pop()();Pe=!1,ke.clear(),X(t)}function Tt(t){if(t.fragment!==null){t.update(),Z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}const pe=new Set;let x;function q(){x={r:0,c:[],p:x}}function G(){x.r||Z(x.c),x=x.p}function k(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function L(t,e,n,l){if(t&&t.o){if(pe.has(t))return;pe.add(t),x.c.push(()=>{pe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Te(t,e){const n=e.token={};function l(r,s,o,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const a=r&&(e.current=r)(c);let _=!1;e.block&&(e.blocks?e.blocks.forEach((f,p)=>{p!==s&&f&&(q(),L(f,1,1,()=>{e.blocks[p]===f&&(e.blocks[p]=null)}),G())}):e.block.d(1),a.c(),k(a,1),a.m(e.mount(),e.anchor),_=!0),e.block=a,e.blocks&&(e.blocks[s]=a),_&&He()}if(Rt(t)){const r=Re();if(t.then(s=>{X(r),l(e.then,1,e.value,s),X(null)},s=>{if(X(r),l(e.catch,2,e.error,s),X(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function Bt(t,e,n){const l=e.slice(),{resolved:r}=t;t.current===t.then&&(l[t.value]=r),t.current===t.catch&&(l[t.error]=r),t.block.p(l,n)}function B(t){t&&t.c()}function I(t,e,n,l){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),l||Le(()=>{const o=t.$$.on_mount.map(kt).filter(vt);t.$$.on_destroy?t.$$.on_destroy.push(...o):Z(o),t.$$.on_mount=[]}),s.forEach(Le)}function T(t,e){const n=t.$$;n.fragment!==null&&(Z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ut(t,e){t.$$.dirty[0]===-1&&(ie.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,l,r,s,o,i=[-1]){const c=ue;X(t);const a=t.$$={fragment:null,ctx:[],props:s,update:M,not_equal:r,bound:Me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Me(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let _=!1;if(a.ctx=n?n(t,e.props||{},(f,p,...u)=>{const m=u.length?u[0]:p;return a.ctx&&r(a.ctx[f],a.ctx[f]=m)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](m),_&&Ut(t,f)),p}):[],a.update(),_=!0,Z(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const f=Ft(e.target);a.fragment&&a.fragment.l(f),f.forEach(C)}else a.fragment&&a.fragment.c();e.intro&&k(t.$$.fragment),I(t,e.target,e.anchor,e.customElement),He()}X(c)}class W{$destroy(){T(this,1),this.$destroy=M}$on(e,n){if(!vt(n))return M;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!jt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const oe=[];function ae(t,e=M){let n;const l=new Set;function r(i){if(D(t,i)&&(t=i,n)){const c=!oe.length;for(const a of l)a[1](),oe.push(a,t);if(c){for(let a=0;a<oe.length;a+=2)oe[a][0](oe[a+1]);oe.length=0}}}function s(i){r(i(t))}function o(i,c=M){const a=[i,c];return l.add(a),l.size===1&&(n=e(r)||M),i(t),()=>{l.delete(a),l.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}const ee=ae({}),ce=ae({}),be=ae([]),Ee=ae({});function Jt(t){var e="; "+document.cookie,n=e.split("; "+t+"=");if(n.length==2)return n.pop().split(";").shift()}function qt(t){t.close()}function Gt(t){t.persisted?(console.log("This page was restored from the bfcache."),Pt("lobby")):console.log("This page was loaded normally.")}function Pt(t){window.location.replace(`${window.location.origin}/${t}`)}function Be(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function Ue(t,e,n){const l=t.slice();return l[10]=e[n],l}function Je(t){let e,n,l,r,s;return{c(){e=w("button"),e.textContent="Iniciar jogo",n=z(),l=w("button"),l.textContent="Delete room",d(e,"class","btn bg-primary-500"),d(l,"class","btn bg-primary-500")},m(o,i){R(o,e,i),R(o,n,i),R(o,l,i),r||(s=[Q(e,"click",t[4]),Q(l,"click",Vt)],r=!0)},p:M,d(o){o&&C(e),o&&C(n),o&&C(l),r=!1,Z(s)}}}function qe(t){let e,n;return{c(){e=w("div"),e.innerHTML=`<span class="badge bg-secondary-500">ðŸ’€</span> 
          <span class="flex-auto"><dt class="font-semibold">Empty</dt> 
            <dd></dd></span> 
        `,n=w("hr")},m(l,r){R(l,e,r),R(l,n,r)},p:M,d(l){l&&C(e),l&&C(n)}}}function Ge(t){let e;return{c(){e=w("hr")},m(n,l){R(n,e,l)},d(n){n&&C(e)}}}function De(t){var b;let e,n,l,r,s,o=t[7].name+"",i,c,a,_=t[7].is_admin?"Admin":"Player",f,p,u,m=t[9]!=((b=t[1])==null?void 0:b.length)-1&&Ge();return{c(){e=w("div"),n=w("span"),n.textContent="ðŸ˜„",l=z(),r=w("span"),s=w("dt"),i=Y(o),c=z(),a=w("dd"),f=Y(_),p=z(),m&&m.c(),u=ye(),d(n,"class","badge bg-secondary-500"),d(s,"class","font-semibold"),d(r,"class","flex-auto")},m(g,v){R(g,e,v),P(e,n),P(e,l),P(e,r),P(r,s),P(s,i),P(r,c),P(r,a),P(a,f),P(e,p),m&&m.m(g,v),R(g,u,v)},p(g,v){var j;v&2&&o!==(o=g[7].name+"")&&Se(i,o),v&2&&_!==(_=g[7].is_admin?"Admin":"Player")&&Se(f,_),g[9]!=((j=g[1])==null?void 0:j.length)-1?m||(m=Ge(),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null)},d(g){g&&C(e),m&&m.d(g),g&&C(u)}}}function Dt(t){var j,S,E;let e,n=(S=(j=t[1])==null?void 0:j.find(t[5]))==null?void 0:S.is_admin,l,r,s,o,i=((E=t[0])==null?void 0:E.room_capacity)==2?"1x1":"2x2",c,a,_,f,p,u=n&&Je(t),m=Array(t[2])||[],b=[];for(let h=0;h<m.length;h+=1)b[h]=qe(Ue(t,m,h));let g=t[1]||[],v=[];for(let h=0;h<g.length;h+=1)v[h]=De(Be(t,g,h));return{c(){e=w("div"),u&&u.c(),l=z(),r=w("h3"),s=Y("Game mode: "),o=w("span"),c=Y(i),a=z(),_=w("div"),f=w("dl");for(let h=0;h<b.length;h+=1)b[h].c();p=ye();for(let h=0;h<v.length;h+=1)v[h].c();d(o,"class","font-semibold"),d(f,"class","list-dl "),d(_,"class","card"),d(e,"class","flex flex-col gambiarra gap-2  svelte-z1fb2r")},m(h,H){R(h,e,H),u&&u.m(e,null),P(e,l),P(e,r),P(r,s),P(r,o),P(o,c),P(e,a),P(e,_),P(_,f);for(let y=0;y<b.length;y+=1)b[y].m(f,null);P(f,p);for(let y=0;y<v.length;y+=1)v[y].m(f,null)},p(h,[H]){var y,N,O;if(H&2&&(n=(N=(y=h[1])==null?void 0:y.find(h[5]))==null?void 0:N.is_admin),n?u?u.p(h,H):(u=Je(h),u.c(),u.m(e,l)):u&&(u.d(1),u=null),H&1&&i!==(i=((O=h[0])==null?void 0:O.room_capacity)==2?"1x1":"2x2")&&Se(c,i),H&4){m=Array(h[2])||[];let F;for(F=0;F<m.length;F+=1){const de=Ue(h,m,F);b[F]?b[F].p(de,H):(b[F]=qe(),b[F].c(),b[F].m(f,p))}for(;F<b.length;F+=1)b[F].d(1);b.length=m.length}if(H&2){g=h[1]||[];let F;for(F=0;F<g.length;F+=1){const de=Be(h,g,F);v[F]?v[F].p(de,H):(v[F]=De(de),v[F].c(),v[F].m(f,null))}for(;F<v.length;F+=1)v[F].d(1);v.length=g.length}},i:M,o:M,d(h){h&&C(e),u&&u.d(),fe(b,h),fe(v,h)}}}async function Vt(){await fetch(window.location.href,{method:"DELETE"}).then(t=>t.status==204?window.location.replace(`${window.location.origin}/lobby`):console.log("NÃ£o foi possivel deletar a sala, resposta nÃ£o do servidor foi "+t.status))}function Wt(t,e,n){let l,r;A(t,be,_=>n(1,r=_));let{static_room_data:s}=e;const o=je("ws"),i=Jt("uuid");function c(){const _=location.pathname.split("/")[2],f={action:"StartGame",user:i,room:_};o.send(JSON.stringify(f))}const a=_=>_.user_id==i;return t.$$set=_=>{"static_room_data"in _&&n(0,s=_.static_room_data)},t.$$.update=()=>{t.$$.dirty&3&&n(2,l=s!=null&&s.room_capacity?(s==null?void 0:s.room_capacity)-(r==null?void 0:r.length):0)},[s,r,l,i,c,a]}class Kt extends W{constructor(e){super(),V(this,e,Wt,Dt,D,{static_room_data:0})}}class Xt{constructor(){K(this,"map",new Map);K(this,"initialized");K(this,"set_utils_cards",e=>{const n=fetch(this.url_background_svg()).then(r=>r.blob()).then(r=>{this.map.set("bg",URL.createObjectURL(r))}),l=fetch(this.url_card_loading()).then(r=>r.blob()).then(r=>{this.map.set("loading",URL.createObjectURL(r))});e.push(n),e.push(l)});K(this,"url_card_svg",(e,n)=>`https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/${e}${n}.svg`);K(this,"url_background_svg",()=>"https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/backgroundcard.svg");K(this,"url_card_loading",()=>"https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/loadingcard.svg");K(this,"get_card_svg",e=>this.map.get(`${e.number}${e.suit}`));K(this,"get_utils_svg",e=>this.map.get(e));this.initialized=new Promise(e=>{const n=[];this.set_utils_cards(n);for(let l=0;l<4;l++)for(let r=1;r<11;r++){const s=fetch(this.url_card_svg(r,l)).then(o=>o.blob()).then(o=>{this.map.set(`${r}${l}`,URL.createObjectURL(o))});n.push(s)}Promise.all(n).then(()=>e())})}}const _e=ae(new Xt);function Ve(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function We(t){let e,n;return{c(){e=w("img"),J(e.src,n=t[2].get_utils_svg("loading"))||d(e,"src",n),d(e,"alt","10"),d(e,"style",t[3](0)),d(e,"class","opacity-0")},m(l,r){R(l,e,r)},p(l,r){r&4&&!J(e.src,n=l[2].get_utils_svg("loading"))&&d(e,"src",n)},d(l){l&&C(e)}}}function Ke(t){let e,n;return{c(){e=w("img"),J(e.src,n=t[2].get_card_svg(t[5].card))||d(e,"src",n),d(e,"alt","10"),d(e,"style",t[3](+t[7])),d(e,"class","truco_card absolute svelte-3qrcxt")},m(l,r){R(l,e,r)},p(l,r){r&6&&!J(e.src,n=l[2].get_card_svg(l[5].card))&&d(e,"src",n)},d(l){l&&C(e)}}}function Yt(t){let e,n=t[1]||[],l=[];for(let s=0;s<n.length;s+=1)l[s]=Ke(Ve(t,n,s));let r=null;return n.length||(r=We(t)),{c(){e=w("div");for(let s=0;s<l.length;s+=1)l[s].c();r&&r.c(),d(e,"class",t[4]+" relative truco_card svelte-3qrcxt"),d(e,"id",t[0])},m(s,o){R(s,e,o);for(let i=0;i<l.length;i+=1)l[i].m(e,null);r&&r.m(e,null)},p(s,[o]){if(o&14){n=s[1]||[];let i;for(i=0;i<n.length;i+=1){const c=Ve(s,n,i);l[i]?l[i].p(c,o):(l[i]=Ke(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length,!n.length&&r?r.p(s,o):n.length?r&&(r.d(1),r=null):(r=We(s),r.c(),r.m(e,null))}o&1&&d(e,"id",s[0])},i:M,o:M,d(s){s&&C(e),fe(l,s),r&&r.d()}}}function Qt(t,e,n){let l;A(t,_e,c=>n(2,l=c));let{position:r=void 0}=e,{cards:s=void 0}=e;const o=c=>{if(c<=0)return"";const a=c*1;return`transform: translateX(${c*10}px) rotate(${a}deg); z-index:${c}`};let i=r=="left"||r=="right"?"row-span-3 rotate-90":"";return t.$$set=c=>{"position"in c&&n(0,r=c.position),"cards"in c&&n(1,s=c.cards)},[r,s,l,o,i]}class me extends W{constructor(e){super(),V(this,e,Qt,Yt,D,{position:0,cards:1})}}function Zt(t){let e,n,l,r,s,o;return{c(){e=w("div"),n=w("img"),r=z(),s=w("img"),J(n.src,l=t[0].get_utils_svg("bg"))||d(n,"src",l),d(n,"alt","10"),d(n,"class","truco_card absolute cardback svelte-vlz4o"),J(s.src,o=t[1].manilha?t[0].get_card_svg(t[1].manilha):t[0].get_utils_svg("loading"))||d(s,"src",o),d(s,"alt","10"),d(s,"class","manilha truco_card svelte-vlz4o"),d(e,"class","relative")},m(i,c){R(i,e,c),P(e,n),P(e,r),P(e,s)},p(i,[c]){c&1&&!J(n.src,l=i[0].get_utils_svg("bg"))&&d(n,"src",l),c&3&&!J(s.src,o=i[1].manilha?i[0].get_card_svg(i[1].manilha):i[0].get_utils_svg("loading"))&&d(s,"src",o)},i:M,o:M,d(i){i&&C(e)}}}function $t(t,e,n){let l,r;return A(t,_e,s=>n(0,l=s)),A(t,ce,s=>n(1,r=s)),[l,r]}class xt extends W{constructor(e){super(),V(this,e,$t,Zt,D,{})}}let U=null;function en(){tn();const{location:t}=window,n=`${t.protocol.startsWith("https")?"wss":"ws"}://${t.host}${t.pathname}/ws`;return U=new WebSocket(n),U.onopen=()=>{console.log("Eu entrei")},U.onclose=()=>{U=null},U}function tn(){U&&(U.close(),U=null)}const Ce=(t,e,n,l)=>{const r=e,s=location.pathname.split("/")[2];if(t>=0&&t<=3)if(t==3&&!n)console.log("invalid input");else{const o={action:"PlayerInput",user:r,room:s,player_input:t};l.send(JSON.stringify(o))}else console.log("invalid input")};function Xe(t){let e,n,l,r,s;return{c(){e=w("div"),n=w("input"),d(n,"type","range"),d(n,"min","0"),d(n,"max","100"),n.disabled=!0,d(n,"class",l=t[2]+" "+t[3][t[4](t[1])]+"-0 absolute svelte-1do2n3b"),d(e,"class","absolute w-full h-full")},m(o,i){R(o,e,i),P(e,n),ze(n,t[0]),r||(s=[Q(n,"change",t[6]),Q(n,"input",t[6])],r=!0)},p(o,i){i&6&&l!==(l=o[2]+" "+o[3][o[4](o[1])]+"-0 absolute svelte-1do2n3b")&&d(n,"class",l),i&1&&ze(n,o[0])},d(o){o&&C(e),r=!1,Z(s)}}}function nn(t){let e,n=t[1]&&t[0]>0&&Xe(t);return{c(){n&&n.c(),e=ye()},m(l,r){n&&n.m(l,r),R(l,e,r)},p(l,[r]){l[1]&&l[0]>0?n?n.p(l,r):(n=Xe(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:M,o:M,d(l){n&&n.d(l),l&&C(e)}}}function ln(t,e,n){let l,r,s;A(t,Ee,g=>n(1,l=g)),A(t,ee,g=>n(8,r=g)),A(t,ce,g=>n(9,s=g));let{room_capacity:o=4}=e,i={0:"bottom",1:"right",2:"top",3:"left"},c=0,a="bg-success-500",_=je("ws"),f;const p=()=>{n(0,c--,c),c<=0&&(console.log("timer ended"),r.id==l.id&&Ce(r.hand.length-1,r.id,r.is_allowed_to_truco,_),clearInterval(f))},u=g=>{Number.isNaN(g)||(console.log("timer reseted, other player turn, pos = "+g),clearInterval(f),n(0,c=100),f=setInterval(p,150))},m=g=>{var S,E;if(!g)return NaN;const v=(E=(S=s==null?void 0:s.players_in_table)==null?void 0:S.find(h=>h.id==(r==null?void 0:r.id)))==null?void 0:E.position;let j=o-v;return((g==null?void 0:g.position)+j)%o};function b(){c=Mt(this.value),n(0,c)}return t.$$set=g=>{"room_capacity"in g&&n(5,o=g.room_capacity)},t.$$.update=()=>{t.$$.dirty&1&&(c<=33?n(2,a="bg-error-500"):c<=66?n(2,a="bg-warning-500"):n(2,a="bg-success-500")),t.$$.dirty&2&&u(m(l))},[c,l,a,i,m,o,b]}class rn extends W{constructor(e){super(),V(this,e,ln,nn,D,{room_capacity:5})}}function sn(t){let e;return{c(){e=w("h2"),e.textContent="The game hasn't started yet",d(e,"class","row-span-3 col-span-3")},m(n,l){R(n,e,l)},p:M,i:M,o:M,d(n){n&&C(e)}}}function on(t){let e,n,l,r,s,o,i,c,a,_;return e=new me({props:{position:"right",cards:t[0]}}),l=new me({props:{position:"top",cards:t[1]}}),s=new me({props:{position:"left",cards:t[2]}}),i=new xt({}),a=new me({props:{position:"bottom",cards:t[3]}}),{c(){B(e.$$.fragment),n=z(),B(l.$$.fragment),r=z(),B(s.$$.fragment),o=z(),B(i.$$.fragment),c=z(),B(a.$$.fragment)},m(f,p){I(e,f,p),R(f,n,p),I(l,f,p),R(f,r,p),I(s,f,p),R(f,o,p),I(i,f,p),R(f,c,p),I(a,f,p),_=!0},p(f,p){const u={};p&1&&(u.cards=f[0]),e.$set(u);const m={};p&2&&(m.cards=f[1]),l.$set(m);const b={};p&4&&(b.cards=f[2]),s.$set(b);const g={};p&8&&(g.cards=f[3]),a.$set(g)},i(f){_||(k(e.$$.fragment,f),k(l.$$.fragment,f),k(s.$$.fragment,f),k(i.$$.fragment,f),k(a.$$.fragment,f),_=!0)},o(f){L(e.$$.fragment,f),L(l.$$.fragment,f),L(s.$$.fragment,f),L(i.$$.fragment,f),L(a.$$.fragment,f),_=!1},d(f){T(e,f),f&&C(n),T(l,f),f&&C(r),T(s,f),f&&C(o),T(i,f),f&&C(c),T(a,f)}}}function cn(t){let e,n,l,r,s,o;const i=[on,sn],c=[];function a(_,f){return _[5].manilha?0:1}return n=a(t),l=c[n]=i[n](t),s=new rn({props:{room_capacity:t[4]}}),{c(){e=w("div"),l.c(),r=z(),B(s.$$.fragment),d(e,"class","grid grid-rows-3 grid-cols-3 justify-items-center items-center w-full h-full relative")},m(_,f){R(_,e,f),c[n].m(e,null),P(e,r),I(s,e,null),o=!0},p(_,[f]){let p=n;n=a(_),n===p?c[n].p(_,f):(q(),L(c[p],1,1,()=>{c[p]=null}),G(),l=c[n],l?l.p(_,f):(l=c[n]=i[n](_),l.c()),k(l,1),l.m(e,r));const u={};f&16&&(u.room_capacity=_[4]),s.$set(u)},i(_){o||(k(l),k(s.$$.fragment,_),o=!0)},o(_){L(l),L(s.$$.fragment,_),o=!1},d(_){_&&C(e),c[n].d(),T(s)}}}function an(t,e,n){let l;A(t,ce,a=>n(5,l=a));let{right:r=[]}=e,{top:s=[]}=e,{left:o=[]}=e,{bottom:i=[]}=e,{room_capacity:c=4}=e;return t.$$set=a=>{"right"in a&&n(0,r=a.right),"top"in a&&n(1,s=a.top),"left"in a&&n(2,o=a.left),"bottom"in a&&n(3,i=a.bottom),"room_capacity"in a&&n(4,c=a.room_capacity)},[r,s,o,i,c,l]}class fn extends W{constructor(e){super(),V(this,e,an,cn,D,{right:0,top:1,left:2,bottom:3,room_capacity:4})}}function Ye(t,e,n){const l=t.slice();return l[5]=e[n],l}function Qe(t){let e;return{c(){e=w("p"),e.textContent="Empty hand"},m(n,l){R(n,e,l)},p:M,d(n){n&&C(e)}}}function Ze(t){let e,n;return{c(){e=w("img"),J(e.src,n=t[2].get_utils_svg("bg"))||d(e,"src",n),d(e,"alt","10"),d(e,"class","truco_card svelte-19iv6mr")},m(l,r){R(l,e,r)},p(l,r){r&4&&!J(e.src,n=l[2].get_utils_svg("bg"))&&d(e,"src",n)},d(l){l&&C(e)}}}function un(t){let e,n=Array(t[0]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Ze(Ye(t,n,s));let r=null;return n.length||(r=Qe()),{c(){e=w("div");for(let s=0;s<l.length;s+=1)l[s].c();r&&r.c(),d(e,"class","flex justify-center w-full h-full items-center"),Oe(e,"transform","rotate("+t[1]+"deg)")},m(s,o){R(s,e,o);for(let i=0;i<l.length;i+=1)l[i].m(e,null);r&&r.m(e,null)},p(s,[o]){if(o&5){n=Array(s[0]);let i;for(i=0;i<n.length;i+=1){const c=Ye(s,n,i);l[i]?l[i].p(c,o):(l[i]=Ze(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length,!n.length&&r?r.p(s,o):n.length?r&&(r.d(1),r=null):(r=Qe(),r.c(),r.m(e,null))}o&2&&Oe(e,"transform","rotate("+s[1]+"deg)")},i:M,o:M,d(s){s&&C(e),fe(l,s),r&&r.d()}}}function _n(t,e,n){let l;A(t,_e,c=>n(2,l=c));let{position:r=0}=e,{number_of_cards_in_hand:s=3}=e,{static_room_data:o=null}=e,i=0;return r==1&&(i=270),r==3&&(i=90),t.$$set=c=>{"position"in c&&n(3,r=c.position),"number_of_cards_in_hand"in c&&n(0,s=c.number_of_cards_in_hand),"static_room_data"in c&&n(4,o=c.static_room_data)},[s,i,l,r,o]}class Ne extends W{constructor(e){super(),V(this,e,_n,un,D,{position:3,number_of_cards_in_hand:0,static_room_data:4})}}function $e(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function xe(t){let e;return{c(){e=w("li"),e.textContent="Your cards will be here"},m(n,l){R(n,e,l)},p:M,d(n){n&&C(e)}}}function et(t){let e,n,l,r,s;function o(){return t[3](t[7])}return{c(){var i;e=w("button"),n=w("img"),J(n.src,l=(i=t[0])!=null&&i.hand?t[1].get_card_svg(t[5]):t[1].get_utils_svg("loading"))||d(n,"src",l),d(n,"alt","10"),d(e,"class","truco_card svelte-1hst7i")},m(i,c){R(i,e,c),P(e,n),r||(s=Q(e,"click",o),r=!0)},p(i,c){var a;t=i,c&3&&!J(n.src,l=(a=t[0])!=null&&a.hand?t[1].get_card_svg(t[5]):t[1].get_utils_svg("loading"))&&d(n,"src",l)},d(i){i&&C(e),r=!1,s()}}}function tt(t){let e,n,l,r=t[0].is_allowed_to_truco&&nt(t);return{c(){e=w("div"),r&&r.c(),n=z(),l=w("div"),l.innerHTML=`<label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/> 
                    <p>Fold next card</p></label>`,d(l,"class","label"),d(e,"class","teste flex flex-col gap-2 card p-4 svelte-1hst7i")},m(s,o){R(s,e,o),r&&r.m(e,null),P(e,n),P(e,l)},p(s,o){s[0].is_allowed_to_truco?r?r.p(s,o):(r=nt(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null)},d(s){s&&C(e),r&&r.d()}}}function nt(t){let e,n,l;return{c(){e=w("button"),e.textContent="Ask for truco",d(e,"class","btn variant-ghost-secondary")},m(r,s){R(r,e,s),n||(l=Q(e,"click",t[4]),n=!0)},p:M,d(r){r&&C(e),n=!1,l()}}}function dn(t){var i,c;let e,n,l=((i=t[0])==null?void 0:i.hand)||[],r=[];for(let a=0;a<l.length;a+=1)r[a]=et($e(t,l,a));let s=null;l.length||(s=xe());let o=((c=t[0])==null?void 0:c.hand)&&tt(t);return{c(){e=w("div");for(let a=0;a<r.length;a+=1)r[a].c();s&&s.c(),n=z(),o&&o.c(),d(e,"class","flex justify-center")},m(a,_){R(a,e,_);for(let f=0;f<r.length;f+=1)r[f].m(e,null);s&&s.m(e,null),P(e,n),o&&o.m(e,null)},p(a,[_]){var f,p;if(_&7){l=((f=a[0])==null?void 0:f.hand)||[];let u;for(u=0;u<l.length;u+=1){const m=$e(a,l,u);r[u]?r[u].p(m,_):(r[u]=et(m),r[u].c(),r[u].m(e,n))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length,!l.length&&s?s.p(a,_):l.length?s&&(s.d(1),s=null):(s=xe(),s.c(),s.m(e,n))}(p=a[0])!=null&&p.hand?o?o.p(a,_):(o=tt(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:M,o:M,d(a){a&&C(e),fe(r,a),s&&s.d(),o&&o.d()}}}function gn(t,e,n){let l,r;A(t,ee,c=>n(0,l=c)),A(t,_e,c=>n(1,r=c));let s=je("ws");return[l,r,s,c=>Ce(c,l.id,l.is_allowed_to_truco,s),()=>Ce(4,l.id,l.is_allowed_to_truco,s)]}class mn extends W{constructor(e){super(),V(this,e,gn,dn,D,{})}}function lt(t){var l;let e,n;return e=new Ne({props:{number_of_cards_in_hand:Math.abs(((l=t[2])==null?void 0:l.length)-3),position:2,static_room_data:t[0]}}),{c(){B(e.$$.fragment)},m(r,s){I(e,r,s),n=!0},p(r,s){var i;const o={};s&4&&(o.number_of_cards_in_hand=Math.abs(((i=r[2])==null?void 0:i.length)-3)),s&1&&(o.static_room_data=r[0]),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function rt(t){var l;let e,n;return e=new Ne({props:{number_of_cards_in_hand:Math.abs(((l=t[3])==null?void 0:l.length)-3),position:1,static_room_data:t[0]}}),{c(){B(e.$$.fragment)},m(r,s){I(e,r,s),n=!0},p(r,s){var i;const o={};s&8&&(o.number_of_cards_in_hand=Math.abs(((i=r[3])==null?void 0:i.length)-3)),s&1&&(o.static_room_data=r[0]),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function st(t){var l;let e,n;return e=new Ne({props:{number_of_cards_in_hand:Math.abs(((l=t[1])==null?void 0:l.length)-3),position:3,static_room_data:t[0]}}),{c(){B(e.$$.fragment)},m(r,s){I(e,r,s),n=!0},p(r,s){var i;const o={};s&2&&(o.number_of_cards_in_hand=Math.abs(((i=r[1])==null?void 0:i.length)-3)),s&1&&(o.static_room_data=r[0]),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function hn(t){var v,j;let e,n,l,r,s,o,i,c,a,_,f,p,u,m=t[5]&&lt(t),b=((v=t[0])==null?void 0:v.room_capacity)==4&&t[5]&&rt(t);i=new fn({props:{top:t[2],right:t[3],bottom:t[4],left:t[1],room_capacity:t[0].room_capacity}});let g=((j=t[0])==null?void 0:j.room_capacity)==4&&t[5]&&st(t);return p=new mn({}),{c(){e=w("div"),n=w("div"),m&&m.c(),l=z(),r=w("div"),b&&b.c(),s=z(),o=w("div"),B(i.$$.fragment),c=z(),a=w("div"),g&&g.c(),_=z(),f=w("div"),B(p.$$.fragment),d(n,"class","col-span-6 row-span-2 justify-self-stretch relative"),d(r,"class","col-span-1 row-span-6 justify-self-stretch relative"),d(o,"class","col-span-4 row-span-6 bg-neutral-400 justify-self-stretch self-stretch rounded"),d(a,"class","col-span-1 row-span-6 justify-self-stretch relative"),d(f,"class","col-span-6 row-span-2 justify-self-stretch self-stretch relative"),d(e,"class","grid grid-cols-6 overflow-hidden svelte-nr6d3o"),d(e,"id","game_body")},m(S,E){R(S,e,E),P(e,n),m&&m.m(n,null),P(e,l),P(e,r),b&&b.m(r,null),P(e,s),P(e,o),I(i,o,null),P(e,c),P(e,a),g&&g.m(a,null),P(e,_),P(e,f),I(p,f,null),u=!0},p(S,[E]){var H,y;S[5]?m?(m.p(S,E),E&32&&k(m,1)):(m=lt(S),m.c(),k(m,1),m.m(n,null)):m&&(q(),L(m,1,1,()=>{m=null}),G()),((H=S[0])==null?void 0:H.room_capacity)==4&&S[5]?b?(b.p(S,E),E&33&&k(b,1)):(b=rt(S),b.c(),k(b,1),b.m(r,null)):b&&(q(),L(b,1,1,()=>{b=null}),G());const h={};E&4&&(h.top=S[2]),E&8&&(h.right=S[3]),E&16&&(h.bottom=S[4]),E&2&&(h.left=S[1]),E&1&&(h.room_capacity=S[0].room_capacity),i.$set(h),((y=S[0])==null?void 0:y.room_capacity)==4&&S[5]?g?(g.p(S,E),E&33&&k(g,1)):(g=st(S),g.c(),k(g,1),g.m(a,null)):g&&(q(),L(g,1,1,()=>{g=null}),G())},i(S){u||(k(m),k(b),k(i.$$.fragment,S),k(g),k(p.$$.fragment,S),u=!0)},o(S){L(m),L(b),L(i.$$.fragment,S),L(g),L(p.$$.fragment,S),u=!1},d(S){S&&C(e),m&&m.d(),b&&b.d(),T(i),g&&g.d(),T(p)}}}function pn(t,e,n){let l,r,s,o,i,c;A(t,ee,u=>n(7,i=u)),A(t,ce,u=>n(5,c=u));let{played_cards:a=null}=e,{static_room_data:_=null}=e;const f=u=>{var j,S;const m=(S=(j=c==null?void 0:c.players_in_table)==null?void 0:j.find(E=>E.id==(i==null?void 0:i.id)))==null?void 0:S.position;let b=(_==null?void 0:_.room_capacity)-m;return Object.keys(u).map(E=>u[E].map(h=>{let H={...h},y=(H.position+b)%(_==null?void 0:_.room_capacity);return H.position=y,H}))},p=(u,m)=>{let b=[],g=f(m);return Object.keys(g).forEach(j=>{var S;(S=g[j])==null||S.forEach(E=>{E.position==u&&b.push(E)})}),b};return t.$$set=u=>{"played_cards"in u&&n(6,a=u.played_cards),"static_room_data"in u&&n(0,_=u.static_room_data)},t.$$.update=()=>{t.$$.dirty&64&&n(4,l=p(0,a)),t.$$.dirty&65&&n(3,r=(_==null?void 0:_.room_capacity)!=2?p(1,a):[]),t.$$.dirty&65&&n(2,s=(_==null?void 0:_.room_capacity)!=2?p(2,a):p(1,a)),t.$$.dirty&64&&n(1,o=p(3,a))},[_,o,s,r,l,c,a]}class bn extends W{constructor(e){super(),V(this,e,pn,hn,D,{played_cards:6,static_room_data:0})}}const ve={};function ot(t){return t==="local"?localStorage:sessionStorage}function Lt(t,e,n){const l=(n==null?void 0:n.serializer)??JSON,r=(n==null?void 0:n.storage)??"local",s=typeof window<"u"&&typeof document<"u";function o(i,c){s&&ot(r).setItem(i,l.stringify(c))}if(!ve[t]){const i=ae(e,_=>{const f=s?ot(r).getItem(t):null;if(f&&_(l.parse(f)),s){const p=u=>{u.key===t&&_(u.newValue?l.parse(u.newValue):null)};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)}}),{subscribe:c,set:a}=i;ve[t]={set(_){o(t,_),a(_)},update(_){const f=_(Ht(i));o(t,f),a(f)},subscribe:c}}return ve[t]}Lt("storePrefersDarkScheme",!1);Lt("storeLightSwitch",void 0);const yn=t=>({}),it=t=>({}),kn=t=>({}),ct=t=>({}),vn=t=>({}),at=t=>({}),wn=t=>({}),ft=t=>({}),Sn=t=>({}),ut=t=>({}),Pn=t=>({}),_t=t=>({});function dt(t){let e,n,l;const r=t[18].header,s=te(r,t,t[17],_t);return{c(){e=w("header"),s&&s.c(),d(e,"id","shell-header"),d(e,"class",n="flex-none "+t[7])},m(o,i){R(o,e,i),s&&s.m(e,null),l=!0},p(o,i){s&&s.p&&(!l||i&131072)&&le(s,r,o,o[17],l?ne(r,o[17],i,Pn):re(o[17]),_t),(!l||i&128&&n!==(n="flex-none "+o[7]))&&d(e,"class",n)},i(o){l||(k(s,o),l=!0)},o(o){L(s,o),l=!1},d(o){o&&C(e),s&&s.d(o)}}}function gt(t){let e,n;const l=t[18].sidebarLeft,r=te(l,t,t[17],ut);return{c(){e=w("aside"),r&&r.c(),d(e,"id","sidebar-left"),d(e,"class",t[6])},m(s,o){R(s,e,o),r&&r.m(e,null),n=!0},p(s,o){r&&r.p&&(!n||o&131072)&&le(r,l,s,s[17],n?ne(l,s[17],o,Sn):re(s[17]),ut),(!n||o&64)&&d(e,"class",s[6])},i(s){n||(k(r,s),n=!0)},o(s){L(r,s),n=!1},d(s){s&&C(e),r&&r.d(s)}}}function mt(t){let e,n,l;const r=t[18].pageHeader,s=te(r,t,t[17],ft),o=s||Ln();return{c(){e=w("header"),o&&o.c(),d(e,"id","page-header"),d(e,"class",n="flex-none "+t[4])},m(i,c){R(i,e,c),o&&o.m(e,null),l=!0},p(i,c){s&&s.p&&(!l||c&131072)&&le(s,r,i,i[17],l?ne(r,i[17],c,wn):re(i[17]),ft),(!l||c&16&&n!==(n="flex-none "+i[4]))&&d(e,"class",n)},i(i){l||(k(o,i),l=!0)},o(i){L(o,i),l=!1},d(i){i&&C(e),o&&o.d(i)}}}function Ln(t){let e;return{c(){e=Y("(slot:header)")},m(n,l){R(n,e,l)},d(n){n&&C(e)}}}function ht(t){let e,n,l;const r=t[18].pageFooter,s=te(r,t,t[17],at),o=s||En();return{c(){e=w("footer"),o&&o.c(),d(e,"id","page-footer"),d(e,"class",n="flex-none "+t[2])},m(i,c){R(i,e,c),o&&o.m(e,null),l=!0},p(i,c){s&&s.p&&(!l||c&131072)&&le(s,r,i,i[17],l?ne(r,i[17],c,vn):re(i[17]),at),(!l||c&4&&n!==(n="flex-none "+i[2]))&&d(e,"class",n)},i(i){l||(k(o,i),l=!0)},o(i){L(o,i),l=!1},d(i){i&&C(e),o&&o.d(i)}}}function En(t){let e;return{c(){e=Y("(slot:footer)")},m(n,l){R(n,e,l)},d(n){n&&C(e)}}}function pt(t){let e,n;const l=t[18].sidebarRight,r=te(l,t,t[17],ct);return{c(){e=w("aside"),r&&r.c(),d(e,"id","sidebar-right"),d(e,"class",t[5])},m(s,o){R(s,e,o),r&&r.m(e,null),n=!0},p(s,o){r&&r.p&&(!n||o&131072)&&le(r,l,s,s[17],n?ne(l,s[17],o,kn):re(s[17]),ct),(!n||o&32)&&d(e,"class",s[5])},i(s){n||(k(r,s),n=!0)},o(s){L(r,s),n=!1},d(s){s&&C(e),r&&r.d(s)}}}function bt(t){let e,n,l;const r=t[18].footer,s=te(r,t,t[17],it);return{c(){e=w("footer"),s&&s.c(),d(e,"id","shell-footer"),d(e,"class",n="flex-none "+t[1])},m(o,i){R(o,e,i),s&&s.m(e,null),l=!0},p(o,i){s&&s.p&&(!l||i&131072)&&le(s,r,o,o[17],l?ne(r,o[17],i,yn):re(o[17]),it),(!l||i&2&&n!==(n="flex-none "+o[1]))&&d(e,"class",n)},i(o){l||(k(s,o),l=!0)},o(o){L(s,o),l=!1},d(o){o&&C(e),s&&s.d(o)}}}function Cn(t){let e,n,l,r,s,o,i,c,a,_,f,p,u,m,b,g=t[9].header&&dt(t),v=t[9].sidebarLeft&&gt(t),j=t[9].pageHeader&&mt(t);const S=t[18].default,E=te(S,t,t[17],null);let h=t[9].pageFooter&&ht(t),H=t[9].sidebarRight&&pt(t),y=t[9].footer&&bt(t);return{c(){e=w("div"),g&&g.c(),n=z(),l=w("div"),v&&v.c(),r=z(),s=w("div"),j&&j.c(),o=z(),i=w("main"),E&&E.c(),a=z(),h&&h.c(),f=z(),H&&H.c(),p=z(),y&&y.c(),d(i,"id","page-content"),d(i,"class",c="flex-auto "+t[3]),d(s,"id","page"),d(s,"class",_=t[0]+" "+yt),d(l,"class","flex-auto "+jn),d(e,"id","appShell"),d(e,"class",t[8]),d(e,"data-testid","app-shell")},m(N,O){R(N,e,O),g&&g.m(e,null),P(e,n),P(e,l),v&&v.m(l,null),P(l,r),P(l,s),j&&j.m(s,null),P(s,o),P(s,i),E&&E.m(i,null),P(s,a),h&&h.m(s,null),P(l,f),H&&H.m(l,null),P(e,p),y&&y.m(e,null),u=!0,m||(b=Q(s,"scroll",t[19]),m=!0)},p(N,[O]){N[9].header?g?(g.p(N,O),O&512&&k(g,1)):(g=dt(N),g.c(),k(g,1),g.m(e,n)):g&&(q(),L(g,1,1,()=>{g=null}),G()),N[9].sidebarLeft?v?(v.p(N,O),O&512&&k(v,1)):(v=gt(N),v.c(),k(v,1),v.m(l,r)):v&&(q(),L(v,1,1,()=>{v=null}),G()),N[9].pageHeader?j?(j.p(N,O),O&512&&k(j,1)):(j=mt(N),j.c(),k(j,1),j.m(s,o)):j&&(q(),L(j,1,1,()=>{j=null}),G()),E&&E.p&&(!u||O&131072)&&le(E,S,N,N[17],u?ne(S,N[17],O,null):re(N[17]),null),(!u||O&8&&c!==(c="flex-auto "+N[3]))&&d(i,"class",c),N[9].pageFooter?h?(h.p(N,O),O&512&&k(h,1)):(h=ht(N),h.c(),k(h,1),h.m(s,null)):h&&(q(),L(h,1,1,()=>{h=null}),G()),(!u||O&1&&_!==(_=N[0]+" "+yt))&&d(s,"class",_),N[9].sidebarRight?H?(H.p(N,O),O&512&&k(H,1)):(H=pt(N),H.c(),k(H,1),H.m(l,null)):H&&(q(),L(H,1,1,()=>{H=null}),G()),N[9].footer?y?(y.p(N,O),O&512&&k(y,1)):(y=bt(N),y.c(),k(y,1),y.m(e,null)):y&&(q(),L(y,1,1,()=>{y=null}),G()),(!u||O&256)&&d(e,"class",N[8])},i(N){u||(k(g),k(v),k(j),k(E,N),k(h),k(H),k(y),u=!0)},o(N){L(g),L(v),L(j),L(E,N),L(h),L(H),L(y),u=!1},d(N){N&&C(e),g&&g.d(),v&&v.d(),j&&j.d(),E&&E.d(N),h&&h.d(),H&&H.d(),y&&y.d(),m=!1,b()}}}const Rn="w-full h-full flex flex-col overflow-hidden",jn="w-full h-full flex overflow-hidden",yt="flex-1 overflow-x-hidden overflow-y-auto flex flex-col",Hn="flex-none overflow-x-hidden overflow-y-auto",Nn="flex-none overflow-x-hidden overflow-y-auto";function Mn(t,e,n){let l,r,s,o,i,c,a,_,{$$slots:f={},$$scope:p}=e;const u=Nt(f);let{regionPage:m=""}=e,{slotHeader:b="z-10"}=e,{slotSidebarLeft:g="w-auto"}=e,{slotSidebarRight:v="w-auto"}=e,{slotPageHeader:j=""}=e,{slotPageContent:S=""}=e,{slotPageFooter:E=""}=e,{slotFooter:h=""}=e;function H(y){Ot.call(this,t,y)}return t.$$set=y=>{n(20,e=we(we({},e),Fe(y))),"regionPage"in y&&n(0,m=y.regionPage),"slotHeader"in y&&n(10,b=y.slotHeader),"slotSidebarLeft"in y&&n(11,g=y.slotSidebarLeft),"slotSidebarRight"in y&&n(12,v=y.slotSidebarRight),"slotPageHeader"in y&&n(13,j=y.slotPageHeader),"slotPageContent"in y&&n(14,S=y.slotPageContent),"slotPageFooter"in y&&n(15,E=y.slotPageFooter),"slotFooter"in y&&n(16,h=y.slotFooter),"$$scope"in y&&n(17,p=y.$$scope)},t.$$.update=()=>{n(8,l=`${Rn} ${e.class??""}`),t.$$.dirty&1024&&n(7,r=`${b}`),t.$$.dirty&2048&&n(6,s=`${Hn} ${g}`),t.$$.dirty&4096&&n(5,o=`${Nn} ${v}`),t.$$.dirty&8192&&n(4,i=`${j}`),t.$$.dirty&16384&&n(3,c=`${S}`),t.$$.dirty&32768&&n(2,a=`${E}`),t.$$.dirty&65536&&n(1,_=`${h}`)},e=Fe(e),[m,_,a,c,i,o,s,r,l,u,b,g,v,j,S,E,h,p,f,H]}class Fn extends W{constructor(e){super(),V(this,e,Mn,Cn,D,{regionPage:0,slotHeader:10,slotSidebarLeft:11,slotSidebarRight:12,slotPageHeader:13,slotPageContent:14,slotPageFooter:15,slotFooter:16})}}function zn(t){return{c:M,m:M,p:M,i:M,o:M,d:M}}function On(t){let e,n;return e=new bn({props:{played_cards:t[0],static_room_data:t[1]}}),{c(){B(e.$$.fragment)},m(l,r){I(e,l,r),n=!0},p(l,r){const s={};r&1&&(s.played_cards=l[0]),r&2&&(s.static_room_data=l[1]),e.$set(s)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function An(t){let e;return{c(){e=Y("...fetching cards")},m(n,l){R(n,e,l)},p:M,i:M,o:M,d(n){n&&C(e)}}}function In(t){let e,n,l,r={ctx:t,current:null,token:null,hasCatch:!1,pending:An,then:On,catch:zn,value:12,blocks:[,,,]};return Te(n=t[3].initialized,r),{c(){e=ye(),r.block.c()},m(s,o){R(s,e,o),r.block.m(s,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(s,o){t=s,r.ctx=t,o&8&&n!==(n=t[3].initialized)&&Te(n,r)||Bt(r,t,o)},i(s){l||(k(r.block),l=!0)},o(s){for(let o=0;o<3;o+=1){const i=r.blocks[o];L(i)}l=!1},d(s){s&&C(e),r.block.d(s),r.token=null,r=null}}}function Tn(t){let e,n;return e=new Kt({props:{static_room_data:t[1]}}),{c(){B(e.$$.fragment)},m(l,r){I(e,l,r),n=!0},p(l,r){const s={};r&2&&(s.static_room_data=l[1]),e.$set(s)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function Bn(t){let e,n,l,r;return e=new Fn({props:{$$slots:{sidebarLeft:[Tn],default:[In]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,o){I(e,s,o),n=!0,l||(r=[Q(window,"pagehide",t[5]),Q(window,"pageshow",t[6])],l=!0)},p(s,[o]){const i={};o&8203&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){T(e,s),l=!1,Z(r)}}}function Un(t,e,n){let l,r,s,o,i;A(t,be,u=>n(8,l=u)),A(t,ee,u=>n(9,r=u)),A(t,Ee,u=>n(10,s=u)),A(t,ce,u=>n(11,o=u)),A(t,_e,u=>n(3,i=u));let c=1,a={},_=null;a[c]=[],en(),U.onmessage=u=>{let m=JSON.parse(u.data);switch(m.msg_type){case"RoomNotification":switch(m.action){case"Update":n(1,_=m.room.Room),$(be,l=m.user.UserVec,l);break}break;case"Redirect":Pt(m.redirect);break;case"GameNotification":switch(m.action){case"RoundStartState":$(ce,o=m.round_data,o),$(ee,r=m.user_data,r),n(4,c=1),n(0,a={});break;case"PlayerTurn":$(Ee,s=m.user_data,s);break;case"PlayerPlayedCard":let b=a[c];(r==null?void 0:r.id)==m.user_id&&$(ee,r.hand=r==null?void 0:r.hand.filter(g=>JSON.stringify(g)!=JSON.stringify(m.card)),r),b==null?b=[m]:b=[...b,m],n(0,a[c]=b,a),$(ee,r.is_allowed_to_truco=!1,r);break;case"RoundWinner":break;default:console.log("Error{msg_parsed}")}default:console.log("Error:{msg_parsed}")}},$(be,l=[{user_id:"8a389a7f-0703-4078-8813-b972d6f8417c",room_id:"3e083e09-0ad5-4e44-939c-2dfc365690b0",is_admin:!0,name:"John picudinho"},{user_id:"f0e33231-2b38-4eb6-beb7-6679190ae22f",room_id:"3e083e09-0ad5-4e44-939c-2dfc365690b0",is_admin:!1,name:"John"}],l),zt("ws",U);const f=()=>qt(U),p=u=>Gt(u);return t.$$.update=()=>{var u;t.$$.dirty&19&&((u=a[c])==null?void 0:u.length)==(_==null?void 0:_.room_capacity)&&n(4,c++,c)},[a,_,U,i,c,f,p]}class Jn extends W{constructor(e){super(),V(this,e,Un,Bn,D,{})}}new Jn({target:document.getElementById("app")});
