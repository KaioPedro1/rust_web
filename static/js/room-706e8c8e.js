var Kt=Object.defineProperty;var Xt=(t,e,n)=>e in t?Kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>(Xt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function H(){}function pe(t,e){for(const n in e)t[n]=e[n];return t}function Yt(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function qt(t){return t()}function Ie(){return Object.create(null)}function $(t){t.forEach(qt)}function Dt(t){return typeof t=="function"}function D(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Le;function V(t,e){return Le||(Le=document.createElement("a")),Le.href=e,t===Le.href}function Qt(t){return Object.keys(t).length===0}function Bt(t,...e){if(t==null)return H;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Zt(t){let e;return Bt(t,n=>e=n)(),e}function F(t,e,n){t.$$.on_destroy.push(Bt(e,n))}function oe(t,e,n,l){if(t){const s=It(t,e,n,l);return t[0](s)}}function It(t,e,n,l){return t[1]&&l?pe(n.ctx.slice(),t[1](l(e))):n.ctx}function ie(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],o=Math.max(e.dirty.length,s.length);for(let i=0;i<o;i+=1)r[i]=e.dirty[i]|s[i];return r}return e.dirty|s}return e.dirty}function ce(t,e,n,l,s,r){if(s){const o=It(e,n,l,r);t.p(o,s)}}function ae(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Ee(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function xt(t){const e={};for(const n in t)e[n]=!0;return e}function Ce(t){return t??""}function ee(t,e,n){return t.set(n),e}function w(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function ne(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function R(){return Y(" ")}function ve(){return Y("")}function B(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $t(t){return t===""?null:+t}function en(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Je(t,e){t.value=e??""}function We(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}class tn{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=X(n.nodeName):this.e=S(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)j(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}let be;function Z(t){be=t}function Ae(){if(!be)throw new Error("Function called outside component initialization");return be}function Ge(t,e){return Ae().$$.context.set(t,e),e}function re(t){return Ae().$$.context.get(t)}function me(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const _e=[],Ve=[];let he=[];const Ke=[],nn=Promise.resolve();let Ne=!1;function ln(){Ne||(Ne=!0,nn.then(Ue))}function Re(t){he.push(t)}const Te=new Set;let ue=0;function Ue(){if(ue!==0)return;const t=be;do{try{for(;ue<_e.length;){const e=_e[ue];ue++,Z(e),sn(e.$$)}}catch(e){throw _e.length=0,ue=0,e}for(Z(null),_e.length=0,ue=0;Ve.length;)Ve.pop()();for(let e=0;e<he.length;e+=1){const n=he[e];Te.has(n)||(Te.add(n),n())}he.length=0}while(_e.length);for(;Ke.length;)Ke.pop()();Ne=!1,Te.clear(),Z(t)}function sn(t){if(t.fragment!==null){t.update(),$(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Re)}}function rn(t){const e=[],n=[];he.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),he=e}const Pe=new Set;let le;function W(){le={r:0,c:[],p:le}}function G(){le.r||$(le.c),le=le.p}function P(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function z(t,e,n,l){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),le.c.push(()=>{Pe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Xe(t,e){const n=e.token={};function l(s,r,o,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const u=s&&(e.current=s)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((d,k)=>{k!==r&&d&&(W(),z(d,1,1,()=>{e.blocks[k]===d&&(e.blocks[k]=null)}),G())}):e.block.d(1),u.c(),P(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&Ue()}if(Yt(t)){const s=Ae();if(t.then(r=>{Z(s),l(e.then,1,e.value,r),Z(null)},r=>{if(Z(s),l(e.catch,2,e.error,r),Z(null),!e.hasCatch)throw r}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function on(t,e,n){const l=e.slice(),{resolved:s}=t;t.current===t.then&&(l[t.value]=s),t.current===t.catch&&(l[t.error]=s),t.block.p(l,n)}function q(t){t&&t.c()}function A(t,e,n,l){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),l||Re(()=>{const o=t.$$.on_mount.map(qt).filter(Dt);t.$$.on_destroy?t.$$.on_destroy.push(...o):$(o),t.$$.on_mount=[]}),r.forEach(Re)}function U(t,e){const n=t.$$;n.fragment!==null&&(rn(n.after_update),$(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function cn(t,e){t.$$.dirty[0]===-1&&(_e.push(t),ln(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(t,e,n,l,s,r,o,i=[-1]){const c=be;Z(t);const u=t.$$={fragment:null,ctx:[],props:r,update:H,not_equal:s,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ie(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(d,k,...m)=>{const y=m.length?m[0]:k;return u.ctx&&s(u.ctx[d],u.ctx[d]=y)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](y),a&&cn(t,d)),k}):[],u.update(),a=!0,$(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const d=en(e.target);u.fragment&&u.fragment.l(d),d.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&P(t.$$.fragment),A(t,e.target,e.anchor,e.customElement),Ue()}Z(c)}class J{$destroy(){U(this,1),this.$destroy=H}$on(e,n){if(!Dt(n))return H;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Qt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const de=[];function fe(t,e=H){let n;const l=new Set;function s(i){if(D(t,i)&&(t=i,n)){const c=!de.length;for(const u of l)u[1](),de.push(u,t);if(c){for(let u=0;u<de.length;u+=2)de[u][0](de[u+1]);de.length=0}}}function r(i){s(i(t))}function o(i,c=H){const u=[i,c];return l.add(u),l.size===1&&(n=e(s)||H),i(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}const te=fe({}),ge=fe({}),Me=fe([]),Oe=fe({});function an(t){var e="; "+document.cookie,n=e.split("; "+t+"=");if(n.length==2)return n.pop().split(";").shift()}function fn(t){t.close()}function un(t){t.persisted?(console.log("This page was restored from the bfcache."),Jt("lobby")):console.log("This page was loaded normally.")}function Jt(t){window.location.replace(`${window.location.origin}/${t}`)}const Ye={0:"bottom",1:"right",2:"top",3:"left"};function dn(t){let e,n,l,s=t[0].room_capacity==2?"1x1":"2x2",r;return{c(){e=S("h3"),n=Y("Game mode: "),l=S("span"),r=Y(s),f(l,"class","font-semibold")},m(o,i){j(o,e,i),w(e,n),w(e,l),w(l,r)},p(o,[i]){i&1&&s!==(s=o[0].room_capacity==2?"1x1":"2x2")&&He(r,s)},i:H,o:H,d(o){o&&C(e)}}}function _n(t,e,n){let l,s=re("static_room_data");return F(t,s,r=>n(0,l=r)),[l,s]}class hn extends J{constructor(e){super(),I(this,e,_n,dn,D,{})}}function gn(t){let e,n,l,s,r;return{c(){e=S("button"),e.textContent="Iniciar jogo",n=R(),l=S("button"),l.textContent="Delete room",f(e,"class","btn bg-primary-500"),f(l,"class","btn bg-primary-500")},m(o,i){j(o,e,i),j(o,n,i),j(o,l,i),s||(r=[B(e,"click",t[0]),B(l,"click",mn)],s=!0)},p:H,i:H,o:H,d(o){o&&C(e),o&&C(n),o&&C(l),s=!1,$(r)}}}async function mn(){await fetch(window.location.href,{method:"DELETE"}).then(t=>t.status==204?window.location.replace(`${window.location.origin}/lobby`):console.log("NÃ£o foi possivel deletar a sala, resposta nÃ£o do servidor foi "+t.status))}function pn(t,e,n){let{user:l=void 0}=e;const s=re("ws");function r(){const o=location.pathname.split("/")[2],i={action:"StartGame",user:l,room:o};s.send(JSON.stringify(i))}return t.$$set=o=>{"user"in o&&n(1,l=o.user)},[r,l]}class bn extends J{constructor(e){super(),I(this,e,pn,gn,D,{user:1})}}function Qe(t,e,n){const l=t.slice();return l[4]=e[n],l[6]=n,l}function Ze(t,e,n){const l=t.slice();return l[7]=e[n],l}function xe(t){let e,n;return{c(){e=S("div"),e.innerHTML=`<span class="badge bg-secondary-500">ðŸ’€</span> 
        <span class="flex-auto"><dt class="font-semibold">Empty</dt> 
          <dd></dd></span> 
      `,n=S("hr")},m(l,s){j(l,e,s),j(l,n,s)},p:H,d(l){l&&C(e),l&&C(n)}}}function $e(t){let e;return{c(){e=S("hr")},m(n,l){j(n,e,l)},d(n){n&&C(e)}}}function et(t){var E;let e,n,l,s,r,o=t[4].name+"",i,c,u,a=t[4].is_admin?"Admin":"Player",d,k,m,y=t[6]!=((E=t[0])==null?void 0:E.length)-1&&$e();return{c(){e=S("div"),n=S("span"),n.textContent="ðŸ˜„",l=R(),s=S("span"),r=S("dt"),i=Y(o),c=R(),u=S("dd"),d=Y(a),k=R(),y&&y.c(),m=ve(),f(n,"class","badge bg-secondary-500"),f(r,"class","font-semibold"),f(s,"class","flex-auto")},m(g,b){j(g,e,b),w(e,n),w(e,l),w(e,s),w(s,r),w(r,i),w(s,c),w(s,u),w(u,d),w(e,k),y&&y.m(g,b),j(g,m,b)},p(g,b){var h;b&1&&o!==(o=g[4].name+"")&&He(i,o),b&1&&a!==(a=g[4].is_admin?"Admin":"Player")&&He(d,a),g[6]!=((h=g[0])==null?void 0:h.length)-1?y||(y=$e(),y.c(),y.m(m.parentNode,m)):y&&(y.d(1),y=null)},d(g){g&&C(e),y&&y.d(g),g&&C(m)}}}function kn(t){let e,n,l,s=Array(t[1])||[],r=[];for(let c=0;c<s.length;c+=1)r[c]=xe(Ze(t,s,c));let o=t[0]||[],i=[];for(let c=0;c<o.length;c+=1)i[c]=et(Qe(t,o,c));return{c(){e=S("div"),n=S("dl");for(let c=0;c<r.length;c+=1)r[c].c();l=ve();for(let c=0;c<i.length;c+=1)i[c].c();f(n,"class","list-dl "),f(e,"class","card")},m(c,u){j(c,e,u),w(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null);w(n,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(n,null)},p(c,[u]){if(u&2){s=Array(c[1])||[];let a;for(a=0;a<s.length;a+=1){const d=Ze(c,s,a);r[a]?r[a].p(d,u):(r[a]=xe(),r[a].c(),r[a].m(n,l))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}if(u&1){o=c[0]||[];let a;for(a=0;a<o.length;a+=1){const d=Qe(c,o,a);i[a]?i[a].p(d,u):(i[a]=et(d),i[a].c(),i[a].m(n,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=o.length}},i:H,o:H,d(c){c&&C(e),ne(r,c),ne(i,c)}}}function yn(t,e,n){let l,s,r;F(t,Me,i=>n(0,s=i));let o=re("static_room_data");return F(t,o,i=>n(3,r=i)),t.$$.update=()=>{t.$$.dirty&9&&n(1,l=r!=null&&r.room_capacity?(r==null?void 0:r.room_capacity)-(s==null?void 0:s.length):0)},[s,l,o,r]}class vn extends J{constructor(e){super(),I(this,e,yn,kn,D,{})}}function tt(t,e,n){const l=t.slice();l[7]=e[n];const s=l[7]*se/13;return l[8]=s,l}function nt(t,e,n){const l=t.slice();l[7]=e[n];const s=l[7]*se/13;return l[8]=s,l}function lt(t,e,n){const l=t.slice();l[7]=e[n];const s=l[7]*se/13;return l[8]=s,l}function st(t){let e,n,l;return{c(){e=X("line"),n=X("circle"),f(e,"x1",t[2]*3.5+x+ye),f(e,"x2",ke-Wt),f(e,"y1",t[8]),f(e,"y2",t[8]),f(e,"stroke-width",x),f(e,"stroke","grey"),f(n,"cx",t[2]*2+x+ye),f(n,"cy",t[8]),f(n,"r",t[2]),f(n,"stroke","black"),f(n,"stroke-width",x),f(n,"class",l=Ce(t[7]<=t[0]?it:je)+" svelte-1qgxxzj")},m(s,r){j(s,e,r),j(s,n,r)},p(s,r){r&1&&l!==(l=Ce(s[7]<=s[0]?it:je)+" svelte-1qgxxzj")&&f(n,"class",l)},d(s){s&&C(e),s&&C(n)}}}function rt(t){let e,n=t[7]+"",l;return{c(){e=X("text"),l=Y(n),f(e,"x",t[4]/2),f(e,"y",t[8]+t[4]/3),f(e,"font-size",t[4]+"px"),f(e,"class","fill-token svelte-1qgxxzj")},m(s,r){j(s,e,r),w(e,l)},p:H,d(s){s&&C(e)}}}function ot(t){let e,n,l;return{c(){e=X("line"),n=X("circle"),f(e,"x1",ke-t[2]*3.5-x-ye),f(e,"x2",Wt),f(e,"y1",t[8]),f(e,"y2",t[8]),f(e,"stroke-width",x),f(e,"stroke","grey"),f(n,"cx",ke-t[2]*2-x-ye),f(n,"cy",t[8]),f(n,"r",t[2]),f(n,"stroke","black"),f(n,"stroke-width",x),f(n,"class",l=Ce(t[7]<=t[1]?ct:je)+" svelte-1qgxxzj")},m(s,r){j(s,e,r),j(s,n,r)},p(s,r){r&2&&l!==(l=Ce(s[7]<=s[1]?ct:je)+" svelte-1qgxxzj")&&f(n,"class",l)},d(s){s&&C(e),s&&C(n)}}}function wn(t){let e,n,l,s,r,o,i,c,u,a,d,k,m,y,E,g=t[3],b=[];for(let v=0;v<g.length;v+=1)b[v]=st(lt(t,g,v));let h=t[3],L=[];for(let v=0;v<h.length;v+=1)L[v]=rt(nt(t,h,v));let M=t[3],T=[];for(let v=0;v<M.length;v+=1)T[v]=ot(tt(t,M,v));return{c(){e=S("div"),n=S("div"),l=S("h2"),l.textContent="NÃ“S",s=R(),r=X("svg");for(let v=0;v<b.length;v+=1)b[v].c();o=R(),i=S("div"),c=S("h2"),c.textContent="P",u=R(),a=X("svg");for(let v=0;v<L.length;v+=1)L[v].c();d=R(),k=S("div"),m=S("h2"),m.textContent="ELES",y=R(),E=X("svg");for(let v=0;v<T.length;v+=1)T[v].c();f(l,"class","mb-0 font-bold"),f(r,"width",ke),f(r,"height",se),f(r,"class","bg-inherit"),f(n,"class","flex flex-col items-center"),f(c,"class","mb-0 font-bold opacity-0"),f(a,"width",t[4]),f(a,"height",se),f(a,"class","svelte-1qgxxzj"),f(i,"class","flex flex-col items-center"),f(m,"class","mb-0 font-bold"),f(E,"width",ke),f(E,"height",se),f(k,"class","flex flex-col items-center"),f(e,"class","container-svg self-center svelte-1qgxxzj")},m(v,p){j(v,e,p),w(e,n),w(n,l),w(n,s),w(n,r);for(let _=0;_<b.length;_+=1)b[_]&&b[_].m(r,null);w(e,o),w(e,i),w(i,c),w(i,u),w(i,a);for(let _=0;_<L.length;_+=1)L[_]&&L[_].m(a,null);w(e,d),w(e,k),w(k,m),w(k,y),w(k,E);for(let _=0;_<T.length;_+=1)T[_]&&T[_].m(E,null)},p(v,[p]){if(p&13){g=v[3];let _;for(_=0;_<g.length;_+=1){const N=lt(v,g,_);b[_]?b[_].p(N,p):(b[_]=st(N),b[_].c(),b[_].m(r,null))}for(;_<b.length;_+=1)b[_].d(1);b.length=g.length}if(p&24){h=v[3];let _;for(_=0;_<h.length;_+=1){const N=nt(v,h,_);L[_]?L[_].p(N,p):(L[_]=rt(N),L[_].c(),L[_].m(a,null))}for(;_<L.length;_+=1)L[_].d(1);L.length=h.length}if(p&14){M=v[3];let _;for(_=0;_<M.length;_+=1){const N=tt(v,M,_);T[_]?T[_].p(N,p):(T[_]=ot(N),T[_].c(),T[_].m(E,null))}for(;_<T.length;_+=1)T[_].d(1);T.length=M.length}},i:H,o:H,d(v){v&&C(e),ne(b,v),ne(L,v),ne(T,v)}}}let ke=75,se=450,x=3,ye=5,Wt=2,it="fill-success-500",ct="fill-error-500",je="fill-surface-50";function Ln(t,e,n){let l;F(t,te,a=>n(6,l=a));let{current_score:s=null}=e,r=0,o=0,i=se/24-x-ye,c=[1,2,3,4,5,6,7,8,9,10,11,12],u=i*2;return t.$$set=a=>{"current_score"in a&&n(5,s=a.current_score)},t.$$.update=()=>{t.$$.dirty&96&&s&&s.current_score.forEach((a,d)=>{d==(l==null?void 0:l.team_id)?n(0,r=a):d!=2&&n(1,o=a)})},[r,o,i,c,u,s,l]}class Sn extends J{constructor(e){super(),I(this,e,Ln,wn,D,{current_score:5})}}function at(t){let e,n;return e=new bn({props:{user:t[2]}}),{c(){q(e.$$.fragment)},m(l,s){A(e,l,s),n=!0},p:H,i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){z(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function Pn(t){var d,k;let e,n=(k=(d=t[1])==null?void 0:d.find(t[3]))==null?void 0:k.is_admin,l,s,r,o,i,c,u,a=n&&at(t);return s=new hn({}),o=new vn({}),c=new Sn({props:{current_score:t[0]}}),{c(){e=S("div"),a&&a.c(),l=R(),q(s.$$.fragment),r=R(),q(o.$$.fragment),i=R(),q(c.$$.fragment),f(e,"class","flex flex-col gambiarra gap-2  svelte-m1w26q")},m(m,y){j(m,e,y),a&&a.m(e,null),w(e,l),A(s,e,null),w(e,r),A(o,e,null),w(e,i),A(c,e,null),u=!0},p(m,[y]){var g,b;y&2&&(n=(b=(g=m[1])==null?void 0:g.find(m[3]))==null?void 0:b.is_admin),n?a?(a.p(m,y),y&2&&P(a,1)):(a=at(m),a.c(),P(a,1),a.m(e,l)):a&&(W(),z(a,1,1,()=>{a=null}),G());const E={};y&1&&(E.current_score=m[0]),c.$set(E)},i(m){u||(P(a),P(s.$$.fragment,m),P(o.$$.fragment,m),P(c.$$.fragment,m),u=!0)},o(m){z(a),z(s.$$.fragment,m),z(o.$$.fragment,m),z(c.$$.fragment,m),u=!1},d(m){m&&C(e),a&&a.d(),U(s),U(o),U(c)}}}function En(t,e,n){let l;F(t,Me,i=>n(1,l=i));let{current_score:s=null}=e;const r=an("uuid"),o=i=>i.user_id==r;return t.$$set=i=>{"current_score"in i&&n(0,s=i.current_score)},[s,l,r,o]}class Cn extends J{constructor(e){super(),I(this,e,En,Pn,D,{current_score:0})}}const ze={};function ft(t){return t==="local"?localStorage:sessionStorage}function qe(t,e,n){const l=(n==null?void 0:n.serializer)??JSON,s=(n==null?void 0:n.storage)??"local",r=typeof window<"u"&&typeof document<"u";function o(i,c){r&&ft(s).setItem(i,l.stringify(c))}if(!ze[t]){const i=fe(e,a=>{const d=r?ft(s).getItem(t):null;if(d&&a(l.parse(d)),r){const k=m=>{m.key===t&&a(m.newValue?l.parse(m.newValue):null)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)}}),{subscribe:c,set:u}=i;ze[t]={set(a){o(t,a),u(a)},update(a){const d=a(Zt(i));o(t,d),u(d)},subscribe:c}}return ze[t]}qe("modeOsPrefers",!1);const Mn=qe("modeUserPrefers",void 0),Fe=qe("modeCurrent",!1);function jn(t){Mn.set(t)}function Tn(t){const e=document.documentElement.classList,n="dark";t===!0?e.remove(n):e.add(n),Fe.set(t)}function Gt(){const t=document.documentElement.classList,e=localStorage.getItem("modeUserPrefers")==="false",n=!("modeUserPrefers"in localStorage),l=window.matchMedia("(prefers-color-scheme: dark)").matches;e||n&&l?t.add("dark"):t.remove("dark")}const zn=t=>({}),ut=t=>({}),Hn=t=>({}),dt=t=>({}),Nn=t=>({}),_t=t=>({}),Rn=t=>({}),ht=t=>({}),On=t=>({}),gt=t=>({}),Fn=t=>({}),mt=t=>({});function pt(t){let e,n,l;const s=t[18].header,r=oe(s,t,t[17],mt);return{c(){e=S("header"),r&&r.c(),f(e,"id","shell-header"),f(e,"class",n="flex-none "+t[7])},m(o,i){j(o,e,i),r&&r.m(e,null),l=!0},p(o,i){r&&r.p&&(!l||i&131072)&&ce(r,s,o,o[17],l?ie(s,o[17],i,Fn):ae(o[17]),mt),(!l||i&128&&n!==(n="flex-none "+o[7]))&&f(e,"class",n)},i(o){l||(P(r,o),l=!0)},o(o){z(r,o),l=!1},d(o){o&&C(e),r&&r.d(o)}}}function bt(t){let e,n;const l=t[18].sidebarLeft,s=oe(l,t,t[17],gt);return{c(){e=S("aside"),s&&s.c(),f(e,"id","sidebar-left"),f(e,"class",t[6])},m(r,o){j(r,e,o),s&&s.m(e,null),n=!0},p(r,o){s&&s.p&&(!n||o&131072)&&ce(s,l,r,r[17],n?ie(l,r[17],o,On):ae(r[17]),gt),(!n||o&64)&&f(e,"class",r[6])},i(r){n||(P(s,r),n=!0)},o(r){z(s,r),n=!1},d(r){r&&C(e),s&&s.d(r)}}}function kt(t){let e,n,l;const s=t[18].pageHeader,r=oe(s,t,t[17],ht),o=r||An();return{c(){e=S("header"),o&&o.c(),f(e,"id","page-header"),f(e,"class",n="flex-none "+t[4])},m(i,c){j(i,e,c),o&&o.m(e,null),l=!0},p(i,c){r&&r.p&&(!l||c&131072)&&ce(r,s,i,i[17],l?ie(s,i[17],c,Rn):ae(i[17]),ht),(!l||c&16&&n!==(n="flex-none "+i[4]))&&f(e,"class",n)},i(i){l||(P(o,i),l=!0)},o(i){z(o,i),l=!1},d(i){i&&C(e),o&&o.d(i)}}}function An(t){let e;return{c(){e=Y("(slot:header)")},m(n,l){j(n,e,l)},d(n){n&&C(e)}}}function yt(t){let e,n,l;const s=t[18].pageFooter,r=oe(s,t,t[17],_t),o=r||Un();return{c(){e=S("footer"),o&&o.c(),f(e,"id","page-footer"),f(e,"class",n="flex-none "+t[2])},m(i,c){j(i,e,c),o&&o.m(e,null),l=!0},p(i,c){r&&r.p&&(!l||c&131072)&&ce(r,s,i,i[17],l?ie(s,i[17],c,Nn):ae(i[17]),_t),(!l||c&4&&n!==(n="flex-none "+i[2]))&&f(e,"class",n)},i(i){l||(P(o,i),l=!0)},o(i){z(o,i),l=!1},d(i){i&&C(e),o&&o.d(i)}}}function Un(t){let e;return{c(){e=Y("(slot:footer)")},m(n,l){j(n,e,l)},d(n){n&&C(e)}}}function vt(t){let e,n;const l=t[18].sidebarRight,s=oe(l,t,t[17],dt);return{c(){e=S("aside"),s&&s.c(),f(e,"id","sidebar-right"),f(e,"class",t[5])},m(r,o){j(r,e,o),s&&s.m(e,null),n=!0},p(r,o){s&&s.p&&(!n||o&131072)&&ce(s,l,r,r[17],n?ie(l,r[17],o,Hn):ae(r[17]),dt),(!n||o&32)&&f(e,"class",r[5])},i(r){n||(P(s,r),n=!0)},o(r){z(s,r),n=!1},d(r){r&&C(e),s&&s.d(r)}}}function wt(t){let e,n,l;const s=t[18].footer,r=oe(s,t,t[17],ut);return{c(){e=S("footer"),r&&r.c(),f(e,"id","shell-footer"),f(e,"class",n="flex-none "+t[1])},m(o,i){j(o,e,i),r&&r.m(e,null),l=!0},p(o,i){r&&r.p&&(!l||i&131072)&&ce(r,s,o,o[17],l?ie(s,o[17],i,zn):ae(o[17]),ut),(!l||i&2&&n!==(n="flex-none "+o[1]))&&f(e,"class",n)},i(o){l||(P(r,o),l=!0)},o(o){z(r,o),l=!1},d(o){o&&C(e),r&&r.d(o)}}}function qn(t){let e,n,l,s,r,o,i,c,u,a,d,k,m,y,E,g=t[9].header&&pt(t),b=t[9].sidebarLeft&&bt(t),h=t[9].pageHeader&&kt(t);const L=t[18].default,M=oe(L,t,t[17],null);let T=t[9].pageFooter&&yt(t),v=t[9].sidebarRight&&vt(t),p=t[9].footer&&wt(t);return{c(){e=S("div"),g&&g.c(),n=R(),l=S("div"),b&&b.c(),s=R(),r=S("div"),h&&h.c(),o=R(),i=S("main"),M&&M.c(),u=R(),T&&T.c(),d=R(),v&&v.c(),k=R(),p&&p.c(),f(i,"id","page-content"),f(i,"class",c="flex-auto "+t[3]),f(r,"id","page"),f(r,"class",a=t[0]+" "+Lt),f(l,"class","flex-auto "+Bn),f(e,"id","appShell"),f(e,"class",t[8]),f(e,"data-testid","app-shell")},m(_,N){j(_,e,N),g&&g.m(e,null),w(e,n),w(e,l),b&&b.m(l,null),w(l,s),w(l,r),h&&h.m(r,null),w(r,o),w(r,i),M&&M.m(i,null),w(r,u),T&&T.m(r,null),w(l,d),v&&v.m(l,null),w(e,k),p&&p.m(e,null),m=!0,y||(E=B(r,"scroll",t[19]),y=!0)},p(_,[N]){_[9].header?g?(g.p(_,N),N&512&&P(g,1)):(g=pt(_),g.c(),P(g,1),g.m(e,n)):g&&(W(),z(g,1,1,()=>{g=null}),G()),_[9].sidebarLeft?b?(b.p(_,N),N&512&&P(b,1)):(b=bt(_),b.c(),P(b,1),b.m(l,s)):b&&(W(),z(b,1,1,()=>{b=null}),G()),_[9].pageHeader?h?(h.p(_,N),N&512&&P(h,1)):(h=kt(_),h.c(),P(h,1),h.m(r,o)):h&&(W(),z(h,1,1,()=>{h=null}),G()),M&&M.p&&(!m||N&131072)&&ce(M,L,_,_[17],m?ie(L,_[17],N,null):ae(_[17]),null),(!m||N&8&&c!==(c="flex-auto "+_[3]))&&f(i,"class",c),_[9].pageFooter?T?(T.p(_,N),N&512&&P(T,1)):(T=yt(_),T.c(),P(T,1),T.m(r,null)):T&&(W(),z(T,1,1,()=>{T=null}),G()),(!m||N&1&&a!==(a=_[0]+" "+Lt))&&f(r,"class",a),_[9].sidebarRight?v?(v.p(_,N),N&512&&P(v,1)):(v=vt(_),v.c(),P(v,1),v.m(l,null)):v&&(W(),z(v,1,1,()=>{v=null}),G()),_[9].footer?p?(p.p(_,N),N&512&&P(p,1)):(p=wt(_),p.c(),P(p,1),p.m(e,null)):p&&(W(),z(p,1,1,()=>{p=null}),G()),(!m||N&256)&&f(e,"class",_[8])},i(_){m||(P(g),P(b),P(h),P(M,_),P(T),P(v),P(p),m=!0)},o(_){z(g),z(b),z(h),z(M,_),z(T),z(v),z(p),m=!1},d(_){_&&C(e),g&&g.d(),b&&b.d(),h&&h.d(),M&&M.d(_),T&&T.d(),v&&v.d(),p&&p.d(),y=!1,E()}}}const Dn="w-full h-full flex flex-col overflow-hidden",Bn="w-full h-full flex overflow-hidden",Lt="flex-1 overflow-x-hidden flex flex-col",In="flex-none overflow-x-hidden overflow-y-auto",Jn="flex-none overflow-x-hidden overflow-y-auto";function Wn(t,e,n){let l,s,r,o,i,c,u,a,{$$slots:d={},$$scope:k}=e;const m=xt(d);let{regionPage:y=""}=e,{slotHeader:E="z-10"}=e,{slotSidebarLeft:g="w-auto"}=e,{slotSidebarRight:b="w-auto"}=e,{slotPageHeader:h=""}=e,{slotPageContent:L=""}=e,{slotPageFooter:M=""}=e,{slotFooter:T=""}=e;function v(p){me.call(this,t,p)}return t.$$set=p=>{n(20,e=pe(pe({},e),Ee(p))),"regionPage"in p&&n(0,y=p.regionPage),"slotHeader"in p&&n(10,E=p.slotHeader),"slotSidebarLeft"in p&&n(11,g=p.slotSidebarLeft),"slotSidebarRight"in p&&n(12,b=p.slotSidebarRight),"slotPageHeader"in p&&n(13,h=p.slotPageHeader),"slotPageContent"in p&&n(14,L=p.slotPageContent),"slotPageFooter"in p&&n(15,M=p.slotPageFooter),"slotFooter"in p&&n(16,T=p.slotFooter),"$$scope"in p&&n(17,k=p.$$scope)},t.$$.update=()=>{n(8,l=`${Dn} ${e.class??""}`),t.$$.dirty&1024&&n(7,s=`${E}`),t.$$.dirty&2048&&n(6,r=`${In} ${g}`),t.$$.dirty&4096&&n(5,o=`${Jn} ${b}`),t.$$.dirty&8192&&n(4,i=`${h}`),t.$$.dirty&16384&&n(3,c=`${L}`),t.$$.dirty&32768&&n(2,u=`${M}`),t.$$.dirty&65536&&n(1,a=`${T}`)},e=Ee(e),[y,a,u,c,i,o,r,s,l,m,E,g,b,h,L,M,T,k,d,v]}class Gn extends J{constructor(e){super(),I(this,e,Wn,qn,D,{regionPage:0,slotHeader:10,slotSidebarLeft:11,slotSidebarRight:12,slotPageHeader:13,slotPageContent:14,slotPageFooter:15,slotFooter:16})}}function Vn(t){let e,n=`<script>(${Gt.toString()})();<\/script>`,l,s,r,o,i,c,u,a,d,k,m,y,E;return{c(){e=new tn(!1),l=ve(),s=R(),r=S("div"),o=S("div"),i=X("svg"),c=X("path"),e.a=l,f(c,"d",u=t[0]?t[4].sun:t[4].moon),f(i,"class",a="lightswitch-icon "+t[1]),f(i,"xmlns","http://www.w3.org/2000/svg"),f(i,"viewBox","0 0 512 512"),f(o,"class",d="lightswitch-thumb "+t[2]),f(r,"class",k="lightswitch-track "+t[3]),f(r,"role","switch"),f(r,"aria-label","Light Switch"),f(r,"aria-checked",t[0]),f(r,"title",m="Toggle "+(t[0]===!0?"Dark":"Light")+" Mode"),f(r,"tabindex","0")},m(g,b){e.m(n,document.head),w(document.head,l),j(g,s,b),j(g,r,b),w(r,o),w(o,i),w(i,c),y||(E=[B(r,"click",t[5]),B(r,"click",t[18]),B(r,"keydown",Qn),B(r,"keydown",t[19]),B(r,"keyup",t[20]),B(r,"keypress",t[21])],y=!0)},p(g,[b]){b&1&&u!==(u=g[0]?g[4].sun:g[4].moon)&&f(c,"d",u),b&2&&a!==(a="lightswitch-icon "+g[1])&&f(i,"class",a),b&4&&d!==(d="lightswitch-thumb "+g[2])&&f(o,"class",d),b&8&&k!==(k="lightswitch-track "+g[3])&&f(r,"class",k),b&1&&f(r,"aria-checked",g[0]),b&1&&m!==(m="Toggle "+(g[0]===!0?"Dark":"Light")+" Mode")&&f(r,"title",m)},i:H,o:H,d(g){C(l),g&&e.d(),g&&C(s),g&&C(r),y=!1,$(E)}}}const Kn="cursor-pointer",Xn="aspect-square scale-[0.8] flex justify-center items-center",Yn="w-[70%] aspect-square";function Qn(t){["Enter","Space"].includes(t.code)&&(t.preventDefault(),t.currentTarget.click())}function Zn(t,e,n){let l,s,r,o,i,c,u,a;F(t,Fe,O=>n(0,a=O));let{bgLight:d="bg-surface-50"}=e,{bgDark:k="bg-surface-900"}=e,{fillLight:m="fill-surface-50"}=e,{fillDark:y="fill-surface-900"}=e,{width:E="w-12"}=e,{height:g="h-6"}=e,{ring:b="ring-[1px] ring-surface-500/30"}=e,{rounded:h="rounded-token"}=e;const L="transition-all duration-[200ms]",M={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function T(){ee(Fe,a=!a,a),jn(a),Tn(a)}function v(O){me.call(this,t,O)}function p(O){me.call(this,t,O)}function _(O){me.call(this,t,O)}function N(O){me.call(this,t,O)}return t.$$set=O=>{n(23,e=pe(pe({},e),Ee(O))),"bgLight"in O&&n(6,d=O.bgLight),"bgDark"in O&&n(7,k=O.bgDark),"fillLight"in O&&n(8,m=O.fillLight),"fillDark"in O&&n(9,y=O.fillDark),"width"in O&&n(10,E=O.width),"height"in O&&n(11,g=O.height),"ring"in O&&n(12,b=O.ring),"rounded"in O&&n(13,h=O.rounded)},t.$$.update=()=>{t.$$.dirty&193&&n(17,l=a===!0?d:k),t.$$.dirty&193&&n(16,s=a===!0?k:d),t.$$.dirty&1&&n(15,r=a===!0?"translate-x-[100%]":""),t.$$.dirty&769&&n(14,o=a===!0?m:y),n(3,i=`${Kn} ${L} ${E} ${g} ${b} ${h} ${l} ${e.class??""}`),t.$$.dirty&108544&&n(2,c=`${Xn} ${L} ${g} ${h} ${s} ${r}`),t.$$.dirty&16384&&n(1,u=`${Yn} ${o}`)},e=Ee(e),[a,u,c,i,M,T,d,k,m,y,E,g,b,h,o,r,s,l,v,p,_,N]}class xn extends J{constructor(e){super(),I(this,e,Zn,Vn,D,{bgLight:6,bgDark:7,fillLight:8,fillDark:9,width:10,height:11,ring:12,rounded:13})}}class $n{constructor(){Q(this,"map",new Map);Q(this,"initialized");Q(this,"set_utils_cards",e=>{const n=fetch(this.url_background_svg()).then(s=>s.blob()).then(s=>{this.map.set("bg",URL.createObjectURL(s))}),l=fetch(this.url_card_loading()).then(s=>s.blob()).then(s=>{this.map.set("loading",URL.createObjectURL(s))});e.push(n),e.push(l)});Q(this,"url_card_svg",(e,n)=>`https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/${e}${n}.svg`);Q(this,"url_background_svg",()=>"https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/backgroundcard.svg");Q(this,"url_card_loading",()=>"https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/loadingcard.svg");Q(this,"get_card_svg",e=>this.map.get(`${e.number}${e.suit}`));Q(this,"get_utils_svg",e=>this.map.get(e));this.initialized=new Promise(e=>{const n=[];this.set_utils_cards(n);for(let l=0;l<4;l++)for(let s=1;s<11;s++){const r=fetch(this.url_card_svg(s,l)).then(o=>o.blob()).then(o=>{this.map.set(`${s}${l}`,URL.createObjectURL(o))});n.push(r)}Promise.all(n).then(()=>e())})}}const we=fe(new $n);function St(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function Pt(t){let e,n;return{c(){e=S("img"),V(e.src,n=t[2].get_utils_svg("loading"))||f(e,"src",n),f(e,"alt","10"),f(e,"style",t[3](0)),f(e,"class","opacity-0")},m(l,s){j(l,e,s)},p(l,s){s&4&&!V(e.src,n=l[2].get_utils_svg("loading"))&&f(e,"src",n)},d(l){l&&C(e)}}}function Et(t){let e,n;return{c(){e=S("img"),V(e.src,n=t[2].get_card_svg(t[5].card))||f(e,"src",n),f(e,"alt","10"),f(e,"style",t[3](+t[7])),f(e,"class","truco_card absolute svelte-3qrcxt")},m(l,s){j(l,e,s)},p(l,s){s&6&&!V(e.src,n=l[2].get_card_svg(l[5].card))&&f(e,"src",n)},d(l){l&&C(e)}}}function el(t){let e,n=t[1]||[],l=[];for(let r=0;r<n.length;r+=1)l[r]=Et(St(t,n,r));let s=null;return n.length||(s=Pt(t)),{c(){e=S("div");for(let r=0;r<l.length;r+=1)l[r].c();s&&s.c(),f(e,"class",t[4]+" relative truco_card svelte-3qrcxt"),f(e,"id",t[0])},m(r,o){j(r,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);s&&s.m(e,null)},p(r,[o]){if(o&14){n=r[1]||[];let i;for(i=0;i<n.length;i+=1){const c=St(r,n,i);l[i]?l[i].p(c,o):(l[i]=Et(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length,!n.length&&s?s.p(r,o):n.length?s&&(s.d(1),s=null):(s=Pt(r),s.c(),s.m(e,null))}o&1&&f(e,"id",r[0])},i:H,o:H,d(r){r&&C(e),ne(l,r),s&&s.d()}}}function tl(t,e,n){let l;F(t,we,c=>n(2,l=c));let{position:s=void 0}=e,{cards:r=void 0}=e;const o=c=>{if(c<=0)return"";const u=c*1;return`transform: translateX(${c*10}px) rotate(${u}deg); z-index:${c}`};let i=s=="left"||s=="right"?"row-span-3 rotate-90":"";return t.$$set=c=>{"position"in c&&n(0,s=c.position),"cards"in c&&n(1,r=c.cards)},[s,r,l,o,i]}class Se extends J{constructor(e){super(),I(this,e,tl,el,D,{position:0,cards:1})}}function nl(t){let e,n,l,s,r,o;return{c(){e=S("div"),n=S("img"),s=R(),r=S("img"),V(n.src,l=t[0].get_utils_svg("bg"))||f(n,"src",l),f(n,"alt","10"),f(n,"class","truco_card absolute cardback svelte-1z6wr9"),V(r.src,o=t[1].manilha?t[0].get_card_svg(t[1].manilha):t[0].get_utils_svg("loading"))||f(r,"src",o),f(r,"alt","10"),f(r,"class","manilha truco_card svelte-1z6wr9"),f(e,"class","relative")},m(i,c){j(i,e,c),w(e,n),w(e,s),w(e,r)},p(i,[c]){c&1&&!V(n.src,l=i[0].get_utils_svg("bg"))&&f(n,"src",l),c&3&&!V(r.src,o=i[1].manilha?i[0].get_card_svg(i[1].manilha):i[0].get_utils_svg("loading"))&&f(r,"src",o)},i:H,o:H,d(i){i&&C(e)}}}function ll(t,e,n){let l,s;return F(t,we,r=>n(0,l=r)),F(t,ge,r=>n(1,s=r)),[l,s]}class sl extends J{constructor(e){super(),I(this,e,ll,nl,D,{})}}let K=null;function rl(t){ol();const{location:e}=window,l=`${e.protocol.startsWith("https")?"wss":"ws"}://${e.host}${e.pathname}/ws`;K=new WebSocket(l),K.onopen=()=>{console.log("Eu entrei")},K.onclose=()=>{K=null},K.onmessage=t}function ol(){K&&(K.close(),K=null)}const Vt=t=>{const e=t.user_id,n=location.pathname.split("/")[2];if(t.input>=0&&t.input<=3)if(t.input==3&&!t.is_allowed_to_truco)console.log("invalid input");else{const l={action:"PlayerInput",user:e,room:n,player_input:t.input};K.send(JSON.stringify(l))}else console.log("invalid input")};function Ct(t){let e,n,l,s,r;return{c(){e=S("div"),n=S("input"),f(n,"type","range"),f(n,"min","0"),f(n,"max","100"),n.disabled=!0,f(n,"class",l=t[2]+" "+Ye[t[4](t[1])]+"-0 absolute svelte-1do2n3b"),f(e,"class","absolute w-full h-full")},m(o,i){j(o,e,i),w(e,n),Je(n,t[0]),s||(r=[B(n,"change",t[5]),B(n,"input",t[5])],s=!0)},p(o,i){i&6&&l!==(l=o[2]+" "+Ye[o[4](o[1])]+"-0 absolute svelte-1do2n3b")&&f(n,"class",l),i&1&&Je(n,o[0])},d(o){o&&C(e),s=!1,$(r)}}}function il(t){let e,n=t[1]&&t[0]>0&&Ct(t);return{c(){n&&n.c(),e=ve()},m(l,s){n&&n.m(l,s),j(l,e,s)},p(l,[s]){l[1]&&l[0]>0?n?n.p(l,s):(n=Ct(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:H,o:H,d(l){n&&n.d(l),l&&C(e)}}}function cl(t,e,n){let l,s,r,o;F(t,Oe,E=>n(1,l=E)),F(t,te,E=>n(7,s=E)),F(t,ge,E=>n(9,o=E));const i=new Worker(new URL("/static/js/TimerWorker-303a4f40.js",self.location));let c=0,u="bg-success-500",a=re("ws"),d=re("static_room_data");F(t,d,E=>n(8,r=E));const k=E=>{var h,L;if(!E)return NaN;const g=(L=(h=o==null?void 0:o.players_in_table)==null?void 0:h.find(M=>M.id==(s==null?void 0:s.id)))==null?void 0:L.position;let b=r.room_capacity-g;return((E==null?void 0:E.position)+b)%r.room_capacity};i.onmessage=function(E){let g=E.data;g.action=="UpdateTimer"&&n(0,c=g.timer),g.action=="TimerEnded"&&Vt({...g.socket_message,ws:a})};const m=E=>{i.postMessage({pos:E,timer:c,current_player_id:l.id,my_data_in_turn:s})};function y(){c=$t(this.value),n(0,c)}return t.$$.update=()=>{t.$$.dirty&1&&(c<=33?n(2,u="bg-error-500"):c<=66?n(2,u="bg-warning-500"):n(2,u="bg-success-500")),t.$$.dirty&2&&m(k(l))},[c,l,u,d,k,y]}class al extends J{constructor(e){super(),I(this,e,cl,il,D,{})}}function fl(t){let e;return{c(){e=S("h2"),e.textContent="The game hasn't started yet",f(e,"class","row-span-3 col-span-3")},m(n,l){j(n,e,l)},p:H,i:H,o:H,d(n){n&&C(e)}}}function ul(t){let e,n,l,s,r,o,i,c,u,a;return e=new Se({props:{position:"right",cards:t[0]}}),l=new Se({props:{position:"top",cards:t[1]}}),r=new Se({props:{position:"left",cards:t[2]}}),i=new sl({}),u=new Se({props:{position:"bottom",cards:t[3]}}),{c(){q(e.$$.fragment),n=R(),q(l.$$.fragment),s=R(),q(r.$$.fragment),o=R(),q(i.$$.fragment),c=R(),q(u.$$.fragment)},m(d,k){A(e,d,k),j(d,n,k),A(l,d,k),j(d,s,k),A(r,d,k),j(d,o,k),A(i,d,k),j(d,c,k),A(u,d,k),a=!0},p(d,k){const m={};k&1&&(m.cards=d[0]),e.$set(m);const y={};k&2&&(y.cards=d[1]),l.$set(y);const E={};k&4&&(E.cards=d[2]),r.$set(E);const g={};k&8&&(g.cards=d[3]),u.$set(g)},i(d){a||(P(e.$$.fragment,d),P(l.$$.fragment,d),P(r.$$.fragment,d),P(i.$$.fragment,d),P(u.$$.fragment,d),a=!0)},o(d){z(e.$$.fragment,d),z(l.$$.fragment,d),z(r.$$.fragment,d),z(i.$$.fragment,d),z(u.$$.fragment,d),a=!1},d(d){U(e,d),d&&C(n),U(l,d),d&&C(s),U(r,d),d&&C(o),U(i,d),d&&C(c),U(u,d)}}}function dl(t){let e,n,l,s,r,o;const i=[ul,fl],c=[];function u(a,d){return a[4].manilha?0:1}return n=u(t),l=c[n]=i[n](t),r=new al({}),{c(){e=S("div"),l.c(),s=R(),q(r.$$.fragment),f(e,"class","grid grid-rows-3 grid-cols-3 justify-items-center items-center w-full h-full relative")},m(a,d){j(a,e,d),c[n].m(e,null),w(e,s),A(r,e,null),o=!0},p(a,[d]){let k=n;n=u(a),n===k?c[n].p(a,d):(W(),z(c[k],1,1,()=>{c[k]=null}),G(),l=c[n],l?l.p(a,d):(l=c[n]=i[n](a),l.c()),P(l,1),l.m(e,s))},i(a){o||(P(l),P(r.$$.fragment,a),o=!0)},o(a){z(l),z(r.$$.fragment,a),o=!1},d(a){a&&C(e),c[n].d(),U(r)}}}function _l(t,e,n){let l;F(t,ge,c=>n(4,l=c));let{right:s=[]}=e,{top:r=[]}=e,{left:o=[]}=e,{bottom:i=[]}=e;return t.$$set=c=>{"right"in c&&n(0,s=c.right),"top"in c&&n(1,r=c.top),"left"in c&&n(2,o=c.left),"bottom"in c&&n(3,i=c.bottom)},[s,r,o,i,l]}class hl extends J{constructor(e){super(),I(this,e,_l,dl,D,{right:0,top:1,left:2,bottom:3})}}function Mt(t,e,n){const l=t.slice();return l[4]=e[n],l}function jt(t){let e;return{c(){e=S("p"),e.textContent="Empty hand"},m(n,l){j(n,e,l)},p:H,d(n){n&&C(e)}}}function Tt(t){let e,n;return{c(){e=S("img"),V(e.src,n=t[2].get_utils_svg("bg"))||f(e,"src",n),f(e,"alt","10"),f(e,"class","truco_card svelte-19iv6mr")},m(l,s){j(l,e,s)},p(l,s){s&4&&!V(e.src,n=l[2].get_utils_svg("bg"))&&f(e,"src",n)},d(l){l&&C(e)}}}function gl(t){let e,n=Array(t[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=Tt(Mt(t,n,r));let s=null;return n.length||(s=jt()),{c(){e=S("div");for(let r=0;r<l.length;r+=1)l[r].c();s&&s.c(),f(e,"class","flex justify-center w-full h-full items-center"),We(e,"transform","rotate("+t[1]+"deg)")},m(r,o){j(r,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);s&&s.m(e,null)},p(r,[o]){if(o&5){n=Array(r[0]);let i;for(i=0;i<n.length;i+=1){const c=Mt(r,n,i);l[i]?l[i].p(c,o):(l[i]=Tt(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length,!n.length&&s?s.p(r,o):n.length?s&&(s.d(1),s=null):(s=jt(),s.c(),s.m(e,null))}o&2&&We(e,"transform","rotate("+r[1]+"deg)")},i:H,o:H,d(r){r&&C(e),ne(l,r),s&&s.d()}}}function ml(t,e,n){let l;F(t,we,i=>n(2,l=i));let{position:s=0}=e,{number_of_cards_in_hand:r=3}=e,o=0;return s==1&&(o=270),s==3&&(o=90),t.$$set=i=>{"position"in i&&n(3,s=i.position),"number_of_cards_in_hand"in i&&n(0,r=i.number_of_cards_in_hand)},[r,o,l,s]}class De extends J{constructor(e){super(),I(this,e,ml,gl,D,{position:3,number_of_cards_in_hand:0})}}function zt(t,e,n){const l=t.slice();return l[6]=e[n],l[8]=n,l}function Ht(t){let e;return{c(){e=S("li"),e.textContent="Your cards will be here"},m(n,l){j(n,e,l)},p:H,d(n){n&&C(e)}}}function Nt(t){let e,n,l,s,r;function o(){return t[3](t[8])}return{c(){var i;e=S("button"),n=S("img"),V(n.src,l=(i=t[0])!=null&&i.hand?t[1].get_card_svg(t[6]):t[1].get_utils_svg("loading"))||f(n,"src",l),f(n,"alt","10"),f(e,"class","truco_card svelte-160ttas")},m(i,c){j(i,e,c),w(e,n),s||(r=B(e,"click",o),s=!0)},p(i,c){var u;t=i,c&3&&!V(n.src,l=(u=t[0])!=null&&u.hand?t[1].get_card_svg(t[6]):t[1].get_utils_svg("loading"))&&f(n,"src",l)},d(i){i&&C(e),s=!1,r()}}}function Rt(t){let e,n,l,s=t[0].is_allowed_to_truco&&Ot(t);return{c(){e=S("div"),s&&s.c(),n=R(),l=S("div"),l.innerHTML=`<label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/> 
                    <p>Fold next card</p></label>`,f(l,"class","label"),f(e,"class","teste flex flex-col gap-2 card p-4 svelte-160ttas")},m(r,o){j(r,e,o),s&&s.m(e,null),w(e,n),w(e,l)},p(r,o){r[0].is_allowed_to_truco?s?s.p(r,o):(s=Ot(r),s.c(),s.m(e,n)):s&&(s.d(1),s=null)},d(r){r&&C(e),s&&s.d()}}}function Ot(t){let e,n,l;return{c(){e=S("button"),e.textContent="Ask for truco",f(e,"class","btn variant-ghost-secondary")},m(s,r){j(s,e,r),n||(l=B(e,"click",t[4]),n=!0)},p:H,d(s){s&&C(e),n=!1,l()}}}function pl(t){var i,c;let e,n,l=((i=t[0])==null?void 0:i.hand)||[],s=[];for(let u=0;u<l.length;u+=1)s[u]=Nt(zt(t,l,u));let r=null;l.length||(r=Ht());let o=((c=t[0])==null?void 0:c.hand)&&Rt(t);return{c(){e=S("div");for(let u=0;u<s.length;u+=1)s[u].c();r&&r.c(),n=R(),o&&o.c(),f(e,"class","flex justify-center")},m(u,a){j(u,e,a);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(e,null);r&&r.m(e,null),w(e,n),o&&o.m(e,null)},p(u,[a]){var d,k;if(a&7){l=((d=u[0])==null?void 0:d.hand)||[];let m;for(m=0;m<l.length;m+=1){const y=zt(u,l,m);s[m]?s[m].p(y,a):(s[m]=Nt(y),s[m].c(),s[m].m(e,n))}for(;m<s.length;m+=1)s[m].d(1);s.length=l.length,!l.length&&r?r.p(u,a):l.length?r&&(r.d(1),r=null):(r=Ht(),r.c(),r.m(e,n))}(k=u[0])!=null&&k.hand?o?o.p(u,a):(o=Rt(u),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:H,o:H,d(u){u&&C(e),ne(s,u),r&&r.d(),o&&o.d()}}}function bl(t,e,n){let l,s;F(t,te,u=>n(0,l=u)),F(t,we,u=>n(1,s=u));let r=re("ws");const o=u=>{let a={input:u,user_id:l.id,is_allowed_to_truco:l.is_allowed_to_truco,ws:r};Vt(a)};return[l,s,o,u=>o(u),()=>o(4)]}class kl extends J{constructor(e){super(),I(this,e,bl,pl,D,{})}}function Ft(t){var l;let e,n;return e=new De({props:{number_of_cards_in_hand:Math.abs(((l=t[2])==null?void 0:l.length)-3),position:2}}),{c(){q(e.$$.fragment)},m(s,r){A(e,s,r),n=!0},p(s,r){var i;const o={};r&4&&(o.number_of_cards_in_hand=Math.abs(((i=s[2])==null?void 0:i.length)-3)),e.$set(o)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){z(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function At(t){var l;let e,n;return e=new De({props:{number_of_cards_in_hand:Math.abs(((l=t[3])==null?void 0:l.length)-3),position:1}}),{c(){q(e.$$.fragment)},m(s,r){A(e,s,r),n=!0},p(s,r){var i;const o={};r&8&&(o.number_of_cards_in_hand=Math.abs(((i=s[3])==null?void 0:i.length)-3)),e.$set(o)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){z(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Ut(t){var l;let e,n;return e=new De({props:{number_of_cards_in_hand:Math.abs(((l=t[1])==null?void 0:l.length)-3),position:3}}),{c(){q(e.$$.fragment)},m(s,r){A(e,s,r),n=!0},p(s,r){var i;const o={};r&2&&(o.number_of_cards_in_hand=Math.abs(((i=s[1])==null?void 0:i.length)-3)),e.$set(o)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){z(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function yl(t){var T,v;let e,n,l=Object.keys(t[5]).length!=0,s,r,o,i,c,u,a,d,k,m,y,E,g,b,h=l&&Ft(t);o=new xn({});let L=((T=t[0])==null?void 0:T.room_capacity)==4&&t[5]&&At(t);d=new hl({props:{top:t[2],right:t[3],bottom:t[4],left:t[1]}});let M=((v=t[0])==null?void 0:v.room_capacity)==4&&t[5]&&Ut(t);return g=new kl({}),{c(){e=S("div"),n=S("div"),h&&h.c(),s=R(),r=S("div"),q(o.$$.fragment),i=R(),c=S("div"),L&&L.c(),u=R(),a=S("div"),q(d.$$.fragment),k=R(),m=S("div"),M&&M.c(),y=R(),E=S("div"),q(g.$$.fragment),f(r,"class","absolute top-0 right-0"),f(n,"class","col-span-6 row-span-2 justify-self-stretch relative"),f(c,"class","col-span-1 row-span-6 justify-self-stretch relative"),f(a,"class","col-span-4 row-span-6 bg-surface-500 justify-self-stretch self-stretch rounded"),f(m,"class","col-span-1 row-span-6 justify-self-stretch relative"),f(E,"class","col-span-6 row-span-2 justify-self-stretch self-stretch relative"),f(e,"class","grid grid-cols-6 overflow-hidden svelte-nr6d3o"),f(e,"id","game_body")},m(p,_){j(p,e,_),w(e,n),h&&h.m(n,null),w(n,s),w(n,r),A(o,r,null),w(e,i),w(e,c),L&&L.m(c,null),w(e,u),w(e,a),A(d,a,null),w(e,k),w(e,m),M&&M.m(m,null),w(e,y),w(e,E),A(g,E,null),b=!0},p(p,[_]){var O,Be;_&32&&(l=Object.keys(p[5]).length!=0),l?h?(h.p(p,_),_&32&&P(h,1)):(h=Ft(p),h.c(),P(h,1),h.m(n,s)):h&&(W(),z(h,1,1,()=>{h=null}),G()),((O=p[0])==null?void 0:O.room_capacity)==4&&p[5]?L?(L.p(p,_),_&33&&P(L,1)):(L=At(p),L.c(),P(L,1),L.m(c,null)):L&&(W(),z(L,1,1,()=>{L=null}),G());const N={};_&4&&(N.top=p[2]),_&8&&(N.right=p[3]),_&16&&(N.bottom=p[4]),_&2&&(N.left=p[1]),d.$set(N),((Be=p[0])==null?void 0:Be.room_capacity)==4&&p[5]?M?(M.p(p,_),_&33&&P(M,1)):(M=Ut(p),M.c(),P(M,1),M.m(m,null)):M&&(W(),z(M,1,1,()=>{M=null}),G())},i(p){b||(P(h),P(o.$$.fragment,p),P(L),P(d.$$.fragment,p),P(M),P(g.$$.fragment,p),b=!0)},o(p){z(h),z(o.$$.fragment,p),z(L),z(d.$$.fragment,p),z(M),z(g.$$.fragment,p),b=!1},d(p){p&&C(e),h&&h.d(),U(o),L&&L.d(),U(d),M&&M.d(),U(g)}}}function vl(t,e,n){let l,s,r,o,i,c,u;F(t,te,y=>n(8,c=y)),F(t,ge,y=>n(5,u=y));let{played_cards:a=null}=e,d=re("static_room_data");F(t,d,y=>n(0,i=y)),Gt();const k=y=>{var L,M;const E=(M=(L=u==null?void 0:u.players_in_table)==null?void 0:L.find(T=>T.id==(c==null?void 0:c.id)))==null?void 0:M.position;let g=(i==null?void 0:i.room_capacity)-E;return Object.keys(y).map(T=>y[T].map(v=>{let p={...v},_=(p.position+g)%(i==null?void 0:i.room_capacity);return p.position=_,p}))},m=(y,E)=>{let g=[],b=k(E);return Object.keys(b).forEach(L=>{var M;(M=b[L])==null||M.forEach(T=>{T.position==y&&g.push(T)})}),g};return t.$$set=y=>{"played_cards"in y&&n(7,a=y.played_cards)},t.$$.update=()=>{t.$$.dirty&128&&n(4,l=m(0,a)),t.$$.dirty&129&&n(3,s=(i==null?void 0:i.room_capacity)!=2?m(1,a):[]),t.$$.dirty&129&&n(2,r=(i==null?void 0:i.room_capacity)!=2?m(2,a):m(1,a)),t.$$.dirty&128&&n(1,o=m(3,a))},[i,o,r,s,l,u,d,a]}class wl extends J{constructor(e){super(),I(this,e,vl,yl,D,{played_cards:7})}}function Ll(t){return{c:H,m:H,p:H,i:H,o:H,d:H}}function Sl(t){let e,n;return e=new wl({props:{played_cards:t[0]}}),{c(){q(e.$$.fragment)},m(l,s){A(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.played_cards=l[0]),e.$set(r)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){z(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function Pl(t){let e;return{c(){e=Y("...fetching cards")},m(n,l){j(n,e,l)},p:H,i:H,o:H,d(n){n&&C(e)}}}function El(t){let e,n,l,s={ctx:t,current:null,token:null,hasCatch:!1,pending:Pl,then:Sl,catch:Ll,value:15,blocks:[,,,]};return Xe(n=t[2].initialized,s),{c(){e=ve(),s.block.c()},m(r,o){j(r,e,o),s.block.m(r,s.anchor=o),s.mount=()=>e.parentNode,s.anchor=e,l=!0},p(r,o){t=r,s.ctx=t,o&4&&n!==(n=t[2].initialized)&&Xe(n,s)||on(s,t,o)},i(r){l||(P(s.block),l=!0)},o(r){for(let o=0;o<3;o+=1){const i=s.blocks[o];z(i)}l=!1},d(r){r&&C(e),s.block.d(r),s.token=null,s=null}}}function Cl(t){let e,n;return e=new Cn({props:{current_score:t[1]}}),{c(){q(e.$$.fragment)},m(l,s){A(e,l,s),n=!0},p(l,s){const r={};s&2&&(r.current_score=l[1]),e.$set(r)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){z(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function Ml(t){let e,n,l,s;return e=new Gn({props:{$$slots:{sidebarLeft:[Cl],default:[El]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(r,o){A(e,r,o),n=!0,l||(s=[B(window,"pagehide",t[6]),B(window,"pageshow",t[7])],l=!0)},p(r,[o]){const i={};o&65543&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){z(e.$$.fragment,r),n=!1},d(r){U(e,r),l=!1,$(s)}}}function jl(t,e,n){let l,s,r,o,i,c;F(t,te,h=>n(8,s=h)),F(t,Oe,h=>n(9,r=h)),F(t,ge,h=>n(10,o=h)),F(t,Me,h=>n(11,i=h)),F(t,we,h=>n(2,c=h));let u=null,a=1,d={},k=fe({});F(t,k,h=>n(5,l=h)),d[a]=[],rl(m);function m(h){let L=JSON.parse(h.data);switch(L.msg_type){case"RoomNotification":y(L);break;case"Redirect":Jt(L.redirect);break;case"GameNotification":E(L);break;default:console.log("Error:{msg_parsed}")}}const y=h=>{switch(h.action){case"Update":ee(k,l=h.room.Room,l),ee(Me,i=h.user.UserVec,i);break}},E=h=>{switch(h.action){case"RoundStartState":ee(ge,o=h.round_data,o),ee(te,s=h.user_data,s),n(4,a=1),n(0,d={});break;case"PlayerTurn":ee(Oe,r=h.user_data,r);break;case"PlayerPlayedCard":let L=d[a];(s==null?void 0:s.id)==h.user_id&&ee(te,s.hand=s==null?void 0:s.hand.filter(M=>JSON.stringify(M)!=JSON.stringify(h.card)),s),L==null?L=[h]:L=[...L,h],n(0,d[a]=L,d),ee(te,s.is_allowed_to_truco=!1,s);break;case"RoundWinner":n(1,u=h);break;default:console.log("Error{msg_parsed}")}};Ge("static_room_data",k),Ge("ws",K);const g=()=>fn(K),b=h=>un(h);return t.$$.update=()=>{var h;t.$$.dirty&49&&((h=d[a])==null?void 0:h.length)==(l==null?void 0:l.room_capacity)&&n(4,a++,a)},[d,u,c,k,a,l,g,b]}class Tl extends J{constructor(e){super(),I(this,e,jl,Ml,D,{})}}new Tl({target:document.getElementById("app")});
