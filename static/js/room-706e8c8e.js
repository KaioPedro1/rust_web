var Nt=Object.defineProperty;var Ft=(t,e,l)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var V=(t,e,l)=>(Ft(t,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=l(r);fetch(r.href,s)}})();function C(){}function Pe(t,e){for(const l in e)t[l]=e[l];return t}function Ht(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function wt(t){return t()}function Ne(){return Object.create(null)}function le(t){t.forEach(wt)}function St(t){return typeof t=="function"}function M(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let me;function T(t,e){return me||(me=document.createElement("a")),me.href=e,t===me.href}function Ot(t){return Object.keys(t).length===0}function Pt(t,...e){if(t==null)return C;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function zt(t){let e;return Pt(t,l=>e=l)(),e}function A(t,e,l){t.$$.on_destroy.push(Pt(e,l))}function ne(t,e,l,n){if(t){const r=Lt(t,e,l,n);return t[0](r)}}function Lt(t,e,l,n){return t[1]&&n?Pe(l.ctx.slice(),t[1](n(e))):l.ctx}function re(t,e,l,n){if(t[2]&&n){const r=t[2](n(l));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let i=0;i<o;i+=1)s[i]=e.dirty[i]|r[i];return s}return e.dirty|r}return e.dirty}function se(t,e,l,n,r,s){if(r){const o=Lt(e,l,n,s);t.p(o,r)}}function oe(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function Fe(t){const e={};for(const l in t)l[0]!=="$"&&(e[l]=t[l]);return e}function At(t){const e={};for(const l in t)e[l]=!0;return e}function ce(t,e,l){return t.set(l),e}function v(t,e){t.appendChild(e)}function y(t,e,l){t.insertBefore(e,l||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function $(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function p(t){return document.createElement(t)}function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Z(t){return document.createTextNode(t)}function H(){return Z(" ")}function ie(){return Z("")}function te(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function a(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Bt(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Tt(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}let _e;function W(t){_e=t}function je(){if(!_e)throw new Error("Function called outside component initialization");return _e}function Mt(t,e){return je().$$.context.set(t,e),e}function Et(t){return je().$$.context.get(t)}function qt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const ue=[],Oe=[],pe=[],ze=[],Ut=Promise.resolve();let Le=!1;function It(){Le||(Le=!0,Ut.then(Ce))}function Ee(t){pe.push(t)}const we=new Set;let ae=0;function Ce(){if(ae!==0)return;const t=_e;do{try{for(;ae<ue.length;){const e=ue[ae];ae++,W(e),Jt(e.$$)}}catch(e){throw ue.length=0,ae=0,e}for(W(null),ue.length=0,ae=0;Oe.length;)Oe.pop()();for(let e=0;e<pe.length;e+=1){const l=pe[e];we.has(l)||(we.add(l),l())}pe.length=0}while(ue.length);for(;ze.length;)ze.pop()();Le=!1,we.clear(),W(t)}function Jt(t){if(t.fragment!==null){t.update(),le(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}const be=new Set;let x;function G(){x={r:0,c:[],p:x}}function D(){x.r||le(x.c),x=x.p}function w(t,e){t&&t.i&&(be.delete(t),t.i(e))}function j(t,e,l,n){if(t&&t.o){if(be.has(t))return;be.add(t),x.c.push(()=>{be.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function Ae(t,e){const l=e.token={};function n(r,s,o,i){if(e.token!==l)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const f=r&&(e.current=r)(c);let d=!1;e.block&&(e.blocks?e.blocks.forEach((u,g)=>{g!==s&&u&&(G(),j(u,1,1,()=>{e.blocks[g]===u&&(e.blocks[g]=null)}),D())}):e.block.d(1),f.c(),w(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[s]=f),d&&Ce()}if(Ht(t)){const r=je();if(t.then(s=>{W(r),n(e.then,1,e.value,s),W(null)},s=>{if(W(r),n(e.catch,2,e.error,s),W(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function Vt(t,e,l){const n=e.slice(),{resolved:r}=t;t.current===t.then&&(n[t.value]=r),t.current===t.catch&&(n[t.error]=r),t.block.p(n,l)}function K(t){t&&t.c()}function q(t,e,l,n){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,l),n||Ee(()=>{const o=t.$$.on_mount.map(wt).filter(St);t.$$.on_destroy?t.$$.on_destroy.push(...o):le(o),t.$$.on_mount=[]}),s.forEach(Ee)}function U(t,e){const l=t.$$;l.fragment!==null&&(le(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Gt(t,e){t.$$.dirty[0]===-1&&(ue.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(t,e,l,n,r,s,o,i=[-1]){const c=_e;W(t);const f=t.$$={fragment:null,ctx:[],props:s,update:C,not_equal:r,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ne(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let d=!1;if(f.ctx=l?l(t,e.props||{},(u,g,...m)=>{const R=m.length?m[0]:g;return f.ctx&&r(f.ctx[u],f.ctx[u]=R)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](R),d&&Gt(t,u)),g}):[],f.update(),d=!0,le(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const u=Bt(e.target);f.fragment&&f.fragment.l(u),u.forEach(k)}else f.fragment&&f.fragment.c();e.intro&&w(t.$$.fragment),q(t,e.target,e.anchor,e.customElement),Ce()}W(c)}class J{$destroy(){U(this,1),this.$destroy=C}$on(e,l){if(!St(l))return C;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fe=[];function he(t,e=C){let l;const n=new Set;function r(i){if(M(t,i)&&(t=i,l)){const c=!fe.length;for(const f of n)f[1](),fe.push(f,t);if(c){for(let f=0;f<fe.length;f+=2)fe[f][0](fe[f+1]);fe.length=0}}}function s(i){r(i(t))}function o(i,c=C){const f=[i,c];return n.add(f),n.size===1&&(l=e(r)||C),i(t),()=>{n.delete(f),n.size===0&&(l(),l=null)}}return{set:r,update:s,subscribe:o}}const Q=he({}),ve=he({}),Re=he([]);function Dt(t){let e;return{c(){e=p("div"),e.innerHTML=`<header class="card-header text-center pb-4"><h3>Game log</h3></header> 
    <hr/> 
	<div class="p-4">(body)</div>`,a(e,"class","card")},m(l,n){y(l,e,n)},p:C,i:C,o:C,d(l){l&&k(e)}}}class Wt extends J{constructor(e){super(),I(this,e,null,Dt,M,{})}}function Be(t,e,l){const n=t.slice();n[7]=e[l];const r=n[7]*ee/13;return n[8]=r,n}function Te(t,e,l){const n=t.slice();n[7]=e[l];const r=n[7]*ee/13;return n[8]=r,n}function Me(t,e,l){const n=t.slice();n[7]=e[l];const r=n[7]*ee/13;return n[8]=r,n}function qe(t){let e,l,n;return{c(){e=X("line"),l=X("circle"),a(e,"x1",t[2]*3.5+Y+ge),a(e,"x2",de-Rt),a(e,"y1",t[8]),a(e,"y2",t[8]),a(e,"stroke-width",Y),a(e,"stroke","grey"),a(l,"cx",t[2]*2+Y+ge),a(l,"cy",t[8]),a(l,"r",t[2]),a(l,"stroke","black"),a(l,"stroke-width",Y),a(l,"class",n=t[7]<=t[0]?Je:ke)},m(r,s){y(r,e,s),y(r,l,s)},p(r,s){s&1&&n!==(n=r[7]<=r[0]?Je:ke)&&a(l,"class",n)},d(r){r&&k(e),r&&k(l)}}}function Ue(t){let e,l=t[7]+"",n;return{c(){e=X("text"),n=Z(l),a(e,"x",t[4]/2),a(e,"y",t[8]+t[4]/3),a(e,"font-size",t[4]+"px"),a(e,"class","svelte-1vtpe7c")},m(r,s){y(r,e,s),v(e,n)},p:C,d(r){r&&k(e)}}}function Ie(t){let e,l,n;return{c(){e=X("line"),l=X("circle"),a(e,"x1",de-t[2]*3.5-Y-ge),a(e,"x2",Rt),a(e,"y1",t[8]),a(e,"y2",t[8]),a(e,"stroke-width",Y),a(e,"stroke","grey"),a(l,"cx",de-t[2]*2-Y-ge),a(l,"cy",t[8]),a(l,"r",t[2]),a(l,"stroke","black"),a(l,"stroke-width",Y),a(l,"class",n=t[7]<=t[1]?Ve:ke)},m(r,s){y(r,e,s),y(r,l,s)},p(r,s){s&2&&n!==(n=r[7]<=r[1]?Ve:ke)&&a(l,"class",n)},d(r){r&&k(e),r&&k(l)}}}function Yt(t){let e,l,n,r,s,o,i,c,f,d,u,g,m,R,S,P=t[3],L=[];for(let h=0;h<P.length;h+=1)L[h]=qe(Me(t,P,h));let N=t[3],O=[];for(let h=0;h<N.length;h+=1)O[h]=Ue(Te(t,N,h));let z=t[3],E=[];for(let h=0;h<z.length;h+=1)E[h]=Ie(Be(t,z,h));return{c(){e=p("main"),l=p("div"),n=p("h2"),n.textContent="NÃ“S",r=H(),s=X("svg");for(let h=0;h<L.length;h+=1)L[h].c();o=H(),i=p("div"),c=p("h2"),c.textContent="P",f=H(),d=X("svg");for(let h=0;h<O.length;h+=1)O[h].c();u=H(),g=p("div"),m=p("h2"),m.textContent="ELES",R=H(),S=X("svg");for(let h=0;h<E.length;h+=1)E[h].c();a(n,"class","mb-0 font-bold"),a(s,"width",de),a(s,"height",ee),a(s,"class","bg-inherit"),a(l,"class","flex flex-col items-center"),a(c,"class","mb-0 font-bold opacity-0"),a(d,"width",t[4]),a(d,"height",ee),a(d,"class","svelte-1vtpe7c"),a(i,"class","flex flex-col items-center"),a(m,"class","mb-0 font-bold"),a(S,"width",de),a(S,"height",ee),a(g,"class","flex flex-col items-center"),a(e,"class","svelte-1vtpe7c")},m(h,b){y(h,e,b),v(e,l),v(l,n),v(l,r),v(l,s);for(let _=0;_<L.length;_+=1)L[_].m(s,null);v(e,o),v(e,i),v(i,c),v(i,f),v(i,d);for(let _=0;_<O.length;_+=1)O[_].m(d,null);v(e,u),v(e,g),v(g,m),v(g,R),v(g,S);for(let _=0;_<E.length;_+=1)E[_].m(S,null)},p(h,[b]){if(b&13){P=h[3];let _;for(_=0;_<P.length;_+=1){const F=Me(h,P,_);L[_]?L[_].p(F,b):(L[_]=qe(F),L[_].c(),L[_].m(s,null))}for(;_<L.length;_+=1)L[_].d(1);L.length=P.length}if(b&24){N=h[3];let _;for(_=0;_<N.length;_+=1){const F=Te(h,N,_);O[_]?O[_].p(F,b):(O[_]=Ue(F),O[_].c(),O[_].m(d,null))}for(;_<O.length;_+=1)O[_].d(1);O.length=N.length}if(b&14){z=h[3];let _;for(_=0;_<z.length;_+=1){const F=Be(h,z,_);E[_]?E[_].p(F,b):(E[_]=Ie(F),E[_].c(),E[_].m(S,null))}for(;_<E.length;_+=1)E[_].d(1);E.length=z.length}},i:C,o:C,d(h){h&&k(e),$(L,h),$(O,h),$(E,h)}}}let de=100,ee=600,Y=3,ge=5,Rt=2,Je="fill-success-500",Ve="fill-error-500",ke="fill-surface-50";function $t(t,e,l){let n;A(t,Q,d=>l(6,n=d));let{current_score:r=null}=e,s=0,o=0,i=ee/24-Y-ge,c=[1,2,3,4,5,6,7,8,9,10,11,12],f=i*2;return t.$$set=d=>{"current_score"in d&&l(5,r=d.current_score)},t.$$.update=()=>{t.$$.dirty&96&&r&&r.current_score.forEach((d,u)=>{u==(n==null?void 0:n.team_id)?l(0,s=d):u!=2&&l(1,o=d)})},[s,o,i,c,f,r,n]}class Kt extends J{constructor(e){super(),I(this,e,$t,Yt,M,{current_score:5})}}function Qt(t){let e,l,n,r,s;return l=new Kt({props:{current_score:t[0]}}),r=new Wt({}),{c(){e=p("div"),K(l.$$.fragment),n=H(),K(r.$$.fragment),a(e,"class","flex flex-col justify-between gambiarra svelte-137p9pg")},m(o,i){y(o,e,i),q(l,e,null),v(e,n),q(r,e,null),s=!0},p(o,[i]){const c={};i&1&&(c.current_score=o[0]),l.$set(c)},i(o){s||(w(l.$$.fragment,o),w(r.$$.fragment,o),s=!0)},o(o){j(l.$$.fragment,o),j(r.$$.fragment,o),s=!1},d(o){o&&k(e),U(l),U(r)}}}function Xt(t,e,l){let{current_score:n=null}=e;return t.$$set=r=>{"current_score"in r&&l(0,n=r.current_score)},[n]}class Zt extends J{constructor(e){super(),I(this,e,Xt,Qt,M,{current_score:0})}}function xt(t){var e="; "+document.cookie,l=e.split("; "+t+"=");if(l.length==2)return l.pop().split(";").shift()}function el(t){t.close()}function tl(t){t.persisted?(console.log("This page was restored from the bfcache."),jt("lobby")):console.log("This page was loaded normally.")}function jt(t){window.location.replace(`${window.location.origin}/${t}`)}function Ge(t,e,l){const n=t.slice();return n[5]=e[l],n[7]=l,n}function De(t){let e,l,n,r,s;return{c(){e=p("button"),e.textContent="Iniciar jogo",l=H(),n=p("button"),n.textContent="Delete room",a(e,"class","btn bg-primary-500"),a(n,"class","btn bg-primary-500")},m(o,i){y(o,e,i),y(o,l,i),y(o,n,i),r||(s=[te(e,"click",t[2]),te(n,"click",nl)],r=!0)},p:C,d(o){o&&k(e),o&&k(l),o&&k(n),r=!1,le(s)}}}function We(t){let e;return{c(){e=p("hr")},m(l,n){y(l,e,n)},d(l){l&&k(e)}}}function Ye(t){let e,l,n,r,s,o=t[5].name+"",i,c,f,d=t[5].is_admin?"Admin":"Player",u,g,m,R=t[7]!=t[0].length-1&&We();return{c(){e=p("div"),l=p("span"),l.textContent="ðŸ’€",n=H(),r=p("span"),s=p("dt"),i=Z(o),c=H(),f=p("dd"),u=Z(d),g=H(),R&&R.c(),m=ie(),a(l,"class","badge bg-secondary-500"),a(s,"class","font-semibold"),a(r,"class","flex-auto")},m(S,P){y(S,e,P),v(e,l),v(e,n),v(e,r),v(r,s),v(s,i),v(r,c),v(r,f),v(f,u),v(e,g),R&&R.m(S,P),y(S,m,P)},p(S,P){P&1&&o!==(o=S[5].name+"")&&He(i,o),P&1&&d!==(d=S[5].is_admin?"Admin":"Player")&&He(u,d),S[7]!=S[0].length-1?R||(R=We(),R.c(),R.m(m.parentNode,m)):R&&(R.d(1),R=null)},d(S){S&&k(e),R&&R.d(S),S&&k(m)}}}function ll(t){var f,d;let e,l=(d=(f=t[0])==null?void 0:f.find(t[3]))==null?void 0:d.is_admin,n,r,s,o=l&&De(t),i=t[0]||[],c=[];for(let u=0;u<i.length;u+=1)c[u]=Ye(Ge(t,i,u));return{c(){e=p("div"),o&&o.c(),n=H(),r=p("div"),s=p("dl");for(let u=0;u<c.length;u+=1)c[u].c();a(s,"class","list-dl "),a(r,"class","card"),a(e,"class","flex flex-col gambiarra gap-2  svelte-z1fb2r")},m(u,g){y(u,e,g),o&&o.m(e,null),v(e,n),v(e,r),v(r,s);for(let m=0;m<c.length;m+=1)c[m].m(s,null)},p(u,[g]){var m,R;if(g&1&&(l=(R=(m=u[0])==null?void 0:m.find(u[3]))==null?void 0:R.is_admin),l?o?o.p(u,g):(o=De(u),o.c(),o.m(e,n)):o&&(o.d(1),o=null),g&1){i=u[0]||[];let S;for(S=0;S<i.length;S+=1){const P=Ge(u,i,S);c[S]?c[S].p(P,g):(c[S]=Ye(P),c[S].c(),c[S].m(s,null))}for(;S<c.length;S+=1)c[S].d(1);c.length=i.length}},i:C,o:C,d(u){u&&k(e),o&&o.d(),$(c,u)}}}async function nl(){await fetch(window.location.href,{method:"DELETE"}).then(t=>t.status==204?window.location.replace(`${window.location.origin}/lobby`):console.log("NÃ£o foi possivel deletar a sala, resposta nÃ£o do servidor foi "+t.status))}function rl(t,e,l){let n;A(t,Re,c=>l(0,n=c));const r=Et("ws"),s=xt("uuid");function o(){const c=location.pathname.split("/")[2],f={action:"StartGame",user:s,room:c};r.send(JSON.stringify(f))}return[n,s,o,c=>c.user_id==s]}class sl extends J{constructor(e){super(),I(this,e,rl,ll,M,{})}}class ol{constructor(){V(this,"map",new Map);V(this,"initialized");V(this,"set_utils_cards",e=>{const l=fetch(this.url_background_svg()).then(r=>r.blob()).then(r=>{this.map.set("bg",URL.createObjectURL(r))}),n=fetch(this.url_card_loading()).then(r=>r.blob()).then(r=>{this.map.set("loading",URL.createObjectURL(r))});e.push(l),e.push(n)});V(this,"url_card_svg",(e,l)=>`https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/${e}${l}.svg`);V(this,"url_background_svg",()=>"https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/backgroundcard.svg");V(this,"url_card_loading",()=>"https://cdn.jsdelivr.net/gh/kaiofake/cardsSvg/loadingcard.svg");V(this,"get_card_svg",e=>this.map.get(`${e.number}${e.suit}`));V(this,"get_utils_svg",e=>this.map.get(e));this.initialized=new Promise(e=>{const l=[];this.set_utils_cards(l);for(let n=0;n<4;n++)for(let r=1;r<11;r++){const s=fetch(this.url_card_svg(r,n)).then(o=>o.blob()).then(o=>{this.map.set(`${r}${n}`,URL.createObjectURL(o))});l.push(s)}Promise.all(l).then(()=>e())})}}const ye=he(new ol);function $e(t,e,l){const n=t.slice();return n[6]=e[l],n[8]=l,n}function Ke(t){let e;return{c(){e=p("li"),e.textContent="Your cards will be here"},m(l,n){y(l,e,n)},p:C,d(l){l&&k(e)}}}function Qe(t){let e,l,n,r,s;function o(){return t[3](t[8])}return{c(){var i;e=p("button"),l=p("img"),T(l.src,n=(i=t[0])!=null&&i.hand?t[1].get_card_svg(t[6]):t[1].get_utils_svg("loading"))||a(l,"src",n),a(l,"alt","10"),a(e,"class","truco_card svelte-im1wb3")},m(i,c){y(i,e,c),v(e,l),r||(s=te(e,"click",o),r=!0)},p(i,c){var f;t=i,c&3&&!T(l.src,n=(f=t[0])!=null&&f.hand?t[1].get_card_svg(t[6]):t[1].get_utils_svg("loading"))&&a(l,"src",n)},d(i){i&&k(e),r=!1,s()}}}function Xe(t){let e,l,n;return{c(){e=p("button"),e.textContent="Ask for truco",a(e,"class","btn variant-ghost-secondary teste svelte-im1wb3")},m(r,s){y(r,e,s),l||(n=te(e,"click",t[4]),l=!0)},p:C,d(r){r&&k(e),l=!1,n()}}}function il(t){var i;let e,l,n=((i=t[0])==null?void 0:i.hand)||[],r=[];for(let c=0;c<n.length;c+=1)r[c]=Qe($e(t,n,c));let s=null;n.length||(s=Ke());let o=t[0].is_allowed_to_truco&&Xe(t);return{c(){e=p("div");for(let c=0;c<r.length;c+=1)r[c].c();s&&s.c(),l=H(),o&&o.c(),a(e,"class","flex justify-center")},m(c,f){y(c,e,f);for(let d=0;d<r.length;d+=1)r[d].m(e,null);s&&s.m(e,null),v(e,l),o&&o.m(e,null)},p(c,[f]){var d;if(f&7){n=((d=c[0])==null?void 0:d.hand)||[];let u;for(u=0;u<n.length;u+=1){const g=$e(c,n,u);r[u]?r[u].p(g,f):(r[u]=Qe(g),r[u].c(),r[u].m(e,l))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length,!n.length&&s?s.p(c,f):n.length?s&&(s.d(1),s=null):(s=Ke(),s.c(),s.m(e,l))}c[0].is_allowed_to_truco?o?o.p(c,f):(o=Xe(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:C,o:C,d(c){c&&k(e),$(r,c),s&&s.d(),o&&o.d()}}}function cl(t,e,l){let n,r;A(t,Q,f=>l(0,n=f)),A(t,ye,f=>l(1,r=f));let s=Et("ws");const o=f=>{const d=n==null?void 0:n.id,u=location.pathname.split("/")[2];if(f>=0&&f<=3)if(f==3&&!n.is_allowed_to_truco)console.log("invalid input");else{const g={action:"PlayerInput",user:d,room:u,player_input:f};s.send(JSON.stringify(g))}else console.log("invalid input")};return[n,r,o,f=>o(f),()=>o(4)]}class al extends J{constructor(e){super(),I(this,e,cl,il,M,{})}}function Ze(t,e,l){const n=t.slice();return n[5]=e[l],n}function xe(t,e,l){const n=t.slice();return n[8]=e[l],n}function fl(t){let e;return{c(){e=p("h2"),e.textContent="The game hasn't started yet"},m(l,n){y(l,e,n)},p:C,d(l){l&&k(e)}}}function ul(t){let e,l,n,r,s,o,i,c,f,d=t[0]&&et(t);return{c(){e=p("div"),l=p("img"),r=H(),s=p("div"),o=p("img"),c=H(),d&&d.c(),f=ie(),T(l.src,n=t[2].get_utils_svg("bg"))||a(l,"src",n),a(l,"alt","10"),a(e,"class","truco_card cardback svelte-11nyqpj"),T(o.src,i=t[1].manilha?t[2].get_card_svg(t[1].manilha):t[2].get_utils_svg("loading"))||a(o,"src",i),a(o,"alt","10"),a(s,"class","truco_card manilha svelte-11nyqpj")},m(u,g){y(u,e,g),v(e,l),y(u,r,g),y(u,s,g),v(s,o),y(u,c,g),d&&d.m(u,g),y(u,f,g)},p(u,g){g&4&&!T(l.src,n=u[2].get_utils_svg("bg"))&&a(l,"src",n),g&6&&!T(o.src,i=u[1].manilha?u[2].get_card_svg(u[1].manilha):u[2].get_utils_svg("loading"))&&a(o,"src",i),u[0]?d?d.p(u,g):(d=et(u),d.c(),d.m(f.parentNode,f)):d&&(d.d(1),d=null)},d(u){u&&k(e),u&&k(r),u&&k(s),u&&k(c),d&&d.d(u),u&&k(f)}}}function et(t){let e,l=Object.keys(t[0]),n=[];for(let r=0;r<l.length;r+=1)n[r]=lt(Ze(t,l,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},m(r,s){for(let o=0;o<n.length;o+=1)n[o].m(r,s);y(r,e,s)},p(r,s){if(s&29){l=Object.keys(r[0]);let o;for(o=0;o<l.length;o+=1){const i=Ze(r,l,o);n[o]?n[o].p(i,s):(n[o]=lt(i),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(r){$(n,r),r&&k(e)}}}function _l(t){let e,l,n,r,s;return{c(){e=p("div"),l=p("img"),r=H(),T(l.src,n=t[2].get_card_svg(t[8].card))||a(l,"src",n),a(l,"alt","10"),a(e,"class","truco_card self-start p-1 svelte-11nyqpj"),a(e,"style",s=t[4](+t[5]))},m(o,i){y(o,e,i),v(e,l),v(e,r)},p(o,i){i&5&&!T(l.src,n=o[2].get_card_svg(o[8].card))&&a(l,"src",n),i&1&&s!==(s=o[4](+o[5]))&&a(e,"style",s)},d(o){o&&k(e)}}}function dl(t){let e,l,n,r,s;return{c(){e=p("div"),l=p("img"),r=H(),T(l.src,n=t[2].get_card_svg(t[8].card))||a(l,"src",n),a(l,"alt","10"),a(e,"class","truco_card self-end p-1 svelte-11nyqpj"),a(e,"style",s=t[4](+t[5]))},m(o,i){y(o,e,i),v(e,l),v(e,r)},p(o,i){i&5&&!T(l.src,n=o[2].get_card_svg(o[8].card))&&a(l,"src",n),i&1&&s!==(s=o[4](+o[5]))&&a(e,"style",s)},d(o){o&&k(e)}}}function tt(t){let e;function l(s,o){return s[8].user_id==s[3].id?dl:_l}let n=l(t),r=n(t);return{c(){r.c(),e=ie()},m(s,o){r.m(s,o),y(s,e,o)},p(s,o){n===(n=l(s))&&r?r.p(s,o):(r.d(1),r=n(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&k(e)}}}function lt(t){let e,l=t[0][t[5]],n=[];for(let r=0;r<l.length;r+=1)n[r]=tt(xe(t,l,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},m(r,s){for(let o=0;o<n.length;o+=1)n[o].m(r,s);y(r,e,s)},p(r,s){if(s&29){l=r[0][r[5]];let o;for(o=0;o<l.length;o+=1){const i=xe(r,l,o);n[o]?n[o].p(i,s):(n[o]=tt(i),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(r){$(n,r),r&&k(e)}}}function gl(t){let e;function l(s,o){return s[1].manilha?ul:fl}let n=l(t),r=n(t);return{c(){e=p("div"),r.c(),a(e,"class","table_game flex items-center justify-center svelte-11nyqpj")},m(s,o){y(s,e,o),r.m(e,null)},p(s,[o]){n===(n=l(s))&&r?r.p(s,o):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null)))},i:C,o:C,d(s){s&&k(e),r.d()}}}function hl(t,e,l){let n,r,s;A(t,ve,c=>l(1,n=c)),A(t,ye,c=>l(2,r=c)),A(t,Q,c=>l(3,s=c));let{played_cards:o=null}=e;const i=c=>c<=1?"":`transform: rotate(${c*7}deg); z-index:${c}`;return t.$$set=c=>{"played_cards"in c&&l(0,o=c.played_cards)},[o,n,r,s,i]}class ml extends J{constructor(e){super(),I(this,e,hl,gl,M,{played_cards:0})}}function nt(t,e,l){const n=t.slice();return n[7]=e[l],n}function rt(t){let e,l,n,r;return{c(){e=p("span"),l=p("img"),r=H(),T(l.src,n=t[1].get_utils_svg("bg"))||a(l,"src",n),a(l,"alt","bg"),a(e,"class","truco_card cardback svelte-4ardud")},m(s,o){y(s,e,o),v(e,l),v(e,r)},p(s,o){o&2&&!T(l.src,n=s[1].get_utils_svg("bg"))&&a(l,"src",n)},d(s){s&&k(e)}}}function pl(t){let e,l,n=Array(t[0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=rt(nt(t,n,s));return{c(){e=p("div"),l=p("div");for(let s=0;s<r.length;s+=1)r[s].c();a(l,"class","flex justify-center gap-1 relative cards_container svelte-4ardud"),a(e,"class","absolute "+t[2]+" svelte-4ardud"),Tt(e,"--rot_degree",t[3])},m(s,o){y(s,e,o),v(e,l);for(let i=0;i<r.length;i+=1)r[i].m(l,null)},p(s,[o]){if(o&3){n=Array(s[0]);let i;for(i=0;i<n.length;i+=1){const c=nt(s,n,i);r[i]?r[i].p(c,o):(r[i]=rt(c),r[i].c(),r[i].m(l,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},i:C,o:C,d(s){s&&k(e),$(r,s)}}}function bl(t,e,l){let n;A(t,ye,d=>l(1,n=d));let{initials:r="P1"}=e,{name:s="(empty)"}=e,{position:o=0}=e,{number_of_cards_in_hand:i=3}=e,c="player_position"+o,f=o*90+"deg";return t.$$set=d=>{"initials"in d&&l(4,r=d.initials),"name"in d&&l(5,s=d.name),"position"in d&&l(6,o=d.position),"number_of_cards_in_hand"in d&&l(0,i=d.number_of_cards_in_hand)},[i,n,c,f,r,s,o]}class vl extends J{constructor(e){super(),I(this,e,bl,pl,M,{initials:4,name:5,position:6,number_of_cards_in_hand:0})}}function st(t,e,l){const n=t.slice();n[3]=e[l],n[6]=l;const r=n[2](n[6],n[0]);return n[4]=r,n}function ot(t){let e,l,n={length:4},r=[];for(let o=0;o<n.length;o+=1)r[o]=it(st(t,n,o));const s=o=>j(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=ie()},m(o,i){for(let c=0;c<r.length;c+=1)r[c].m(o,i);y(o,e,i),l=!0},p(o,i){if(i&5){n={length:4};let c;for(c=0;c<n.length;c+=1){const f=st(o,n,c);r[c]?(r[c].p(f,i),w(r[c],1)):(r[c]=it(f),r[c].c(),w(r[c],1),r[c].m(e.parentNode,e))}for(G(),c=n.length;c<r.length;c+=1)s(c);D()}},i(o){if(!l){for(let i=0;i<n.length;i+=1)w(r[i]);l=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)j(r[i]);l=!1},d(o){$(r,o),o&&k(e)}}}function it(t){let e,l;return e=new vl({props:{initials:"P"+t[6],position:t[6],number_of_cards_in_hand:t[4]}}),{c(){K(e.$$.fragment)},m(n,r){q(e,n,r),l=!0},p(n,r){const s={};r&1&&(s.number_of_cards_in_hand=n[4]),e.$set(s)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){j(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function kl(t){let e,l,n,r,s=t[1]&&ot(t);return n=new ml({props:{played_cards:t[0]}}),{c(){e=p("div"),s&&s.c(),l=H(),K(n.$$.fragment),a(e,"class","grid place-items-center relative svelte-edndqx"),a(e,"id","game_body")},m(o,i){y(o,e,i),s&&s.m(e,null),v(e,l),q(n,e,null),r=!0},p(o,[i]){o[1]?s?(s.p(o,i),i&2&&w(s,1)):(s=ot(o),s.c(),w(s,1),s.m(e,l)):s&&(G(),j(s,1,1,()=>{s=null}),D());const c={};i&1&&(c.played_cards=o[0]),n.$set(c)},i(o){r||(w(s),w(n.$$.fragment,o),r=!0)},o(o){j(s),j(n.$$.fragment,o),r=!1},d(o){o&&k(e),s&&s.d(),U(n)}}}function yl(t,e,l){let n;A(t,ve,o=>l(1,n=o));let{played_cards:r=null}=e;const s=(o,i)=>Object.entries(i).reduce((f,[d,u])=>(u.forEach(g=>{g.position==o&&f--}),f),3);return t.$$set=o=>{"played_cards"in o&&l(0,r=o.played_cards)},[r,n,s]}class wl extends J{constructor(e){super(),I(this,e,yl,kl,M,{played_cards:0})}}const Se={};function ct(t){return t==="local"?localStorage:sessionStorage}function Ct(t,e,l){const n=(l==null?void 0:l.serializer)??JSON,r=(l==null?void 0:l.storage)??"local",s=typeof window<"u"&&typeof document<"u";function o(i,c){s&&ct(r).setItem(i,n.stringify(c))}if(!Se[t]){const i=he(e,d=>{const u=s?ct(r).getItem(t):null;if(u&&d(n.parse(u)),s){const g=m=>{m.key===t&&d(m.newValue?n.parse(m.newValue):null)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)}}),{subscribe:c,set:f}=i;Se[t]={set(d){o(t,d),f(d)},update(d){const u=d(zt(i));o(t,u),f(u)},subscribe:c}}return Se[t]}Ct("storePrefersDarkScheme",!1);Ct("storeLightSwitch",void 0);const Sl=t=>({}),at=t=>({}),Pl=t=>({}),ft=t=>({}),Ll=t=>({}),ut=t=>({}),El=t=>({}),_t=t=>({}),Rl=t=>({}),dt=t=>({}),jl=t=>({}),gt=t=>({});function ht(t){let e,l,n;const r=t[18].header,s=ne(r,t,t[17],gt);return{c(){e=p("header"),s&&s.c(),a(e,"id","shell-header"),a(e,"class",l="flex-none "+t[7])},m(o,i){y(o,e,i),s&&s.m(e,null),n=!0},p(o,i){s&&s.p&&(!n||i&131072)&&se(s,r,o,o[17],n?re(r,o[17],i,jl):oe(o[17]),gt),(!n||i&128&&l!==(l="flex-none "+o[7]))&&a(e,"class",l)},i(o){n||(w(s,o),n=!0)},o(o){j(s,o),n=!1},d(o){o&&k(e),s&&s.d(o)}}}function mt(t){let e,l;const n=t[18].sidebarLeft,r=ne(n,t,t[17],dt);return{c(){e=p("aside"),r&&r.c(),a(e,"id","sidebar-left"),a(e,"class",t[6])},m(s,o){y(s,e,o),r&&r.m(e,null),l=!0},p(s,o){r&&r.p&&(!l||o&131072)&&se(r,n,s,s[17],l?re(n,s[17],o,Rl):oe(s[17]),dt),(!l||o&64)&&a(e,"class",s[6])},i(s){l||(w(r,s),l=!0)},o(s){j(r,s),l=!1},d(s){s&&k(e),r&&r.d(s)}}}function pt(t){let e,l,n;const r=t[18].pageHeader,s=ne(r,t,t[17],_t),o=s||Cl();return{c(){e=p("header"),o&&o.c(),a(e,"id","page-header"),a(e,"class",l="flex-none "+t[4])},m(i,c){y(i,e,c),o&&o.m(e,null),n=!0},p(i,c){s&&s.p&&(!n||c&131072)&&se(s,r,i,i[17],n?re(r,i[17],c,El):oe(i[17]),_t),(!n||c&16&&l!==(l="flex-none "+i[4]))&&a(e,"class",l)},i(i){n||(w(o,i),n=!0)},o(i){j(o,i),n=!1},d(i){i&&k(e),o&&o.d(i)}}}function Cl(t){let e;return{c(){e=Z("(slot:header)")},m(l,n){y(l,e,n)},d(l){l&&k(e)}}}function bt(t){let e,l,n;const r=t[18].pageFooter,s=ne(r,t,t[17],ut),o=s||Nl();return{c(){e=p("footer"),o&&o.c(),a(e,"id","page-footer"),a(e,"class",l="flex-none "+t[2])},m(i,c){y(i,e,c),o&&o.m(e,null),n=!0},p(i,c){s&&s.p&&(!n||c&131072)&&se(s,r,i,i[17],n?re(r,i[17],c,Ll):oe(i[17]),ut),(!n||c&4&&l!==(l="flex-none "+i[2]))&&a(e,"class",l)},i(i){n||(w(o,i),n=!0)},o(i){j(o,i),n=!1},d(i){i&&k(e),o&&o.d(i)}}}function Nl(t){let e;return{c(){e=Z("(slot:footer)")},m(l,n){y(l,e,n)},d(l){l&&k(e)}}}function vt(t){let e,l;const n=t[18].sidebarRight,r=ne(n,t,t[17],ft);return{c(){e=p("aside"),r&&r.c(),a(e,"id","sidebar-right"),a(e,"class",t[5])},m(s,o){y(s,e,o),r&&r.m(e,null),l=!0},p(s,o){r&&r.p&&(!l||o&131072)&&se(r,n,s,s[17],l?re(n,s[17],o,Pl):oe(s[17]),ft),(!l||o&32)&&a(e,"class",s[5])},i(s){l||(w(r,s),l=!0)},o(s){j(r,s),l=!1},d(s){s&&k(e),r&&r.d(s)}}}function kt(t){let e,l,n;const r=t[18].footer,s=ne(r,t,t[17],at);return{c(){e=p("footer"),s&&s.c(),a(e,"id","shell-footer"),a(e,"class",l="flex-none "+t[1])},m(o,i){y(o,e,i),s&&s.m(e,null),n=!0},p(o,i){s&&s.p&&(!n||i&131072)&&se(s,r,o,o[17],n?re(r,o[17],i,Sl):oe(o[17]),at),(!n||i&2&&l!==(l="flex-none "+o[1]))&&a(e,"class",l)},i(o){n||(w(s,o),n=!0)},o(o){j(s,o),n=!1},d(o){o&&k(e),s&&s.d(o)}}}function Fl(t){let e,l,n,r,s,o,i,c,f,d,u,g,m,R,S,P=t[9].header&&ht(t),L=t[9].sidebarLeft&&mt(t),N=t[9].pageHeader&&pt(t);const O=t[18].default,z=ne(O,t,t[17],null);let E=t[9].pageFooter&&bt(t),h=t[9].sidebarRight&&vt(t),b=t[9].footer&&kt(t);return{c(){e=p("div"),P&&P.c(),l=H(),n=p("div"),L&&L.c(),r=H(),s=p("div"),N&&N.c(),o=H(),i=p("main"),z&&z.c(),f=H(),E&&E.c(),u=H(),h&&h.c(),g=H(),b&&b.c(),a(i,"id","page-content"),a(i,"class",c="flex-auto "+t[3]),a(s,"id","page"),a(s,"class",d=t[0]+" "+yt),a(n,"class","flex-auto "+Ol),a(e,"id","appShell"),a(e,"class",t[8]),a(e,"data-testid","app-shell")},m(_,F){y(_,e,F),P&&P.m(e,null),v(e,l),v(e,n),L&&L.m(n,null),v(n,r),v(n,s),N&&N.m(s,null),v(s,o),v(s,i),z&&z.m(i,null),v(s,f),E&&E.m(s,null),v(n,u),h&&h.m(n,null),v(e,g),b&&b.m(e,null),m=!0,R||(S=te(s,"scroll",t[19]),R=!0)},p(_,[F]){_[9].header?P?(P.p(_,F),F&512&&w(P,1)):(P=ht(_),P.c(),w(P,1),P.m(e,l)):P&&(G(),j(P,1,1,()=>{P=null}),D()),_[9].sidebarLeft?L?(L.p(_,F),F&512&&w(L,1)):(L=mt(_),L.c(),w(L,1),L.m(n,r)):L&&(G(),j(L,1,1,()=>{L=null}),D()),_[9].pageHeader?N?(N.p(_,F),F&512&&w(N,1)):(N=pt(_),N.c(),w(N,1),N.m(s,o)):N&&(G(),j(N,1,1,()=>{N=null}),D()),z&&z.p&&(!m||F&131072)&&se(z,O,_,_[17],m?re(O,_[17],F,null):oe(_[17]),null),(!m||F&8&&c!==(c="flex-auto "+_[3]))&&a(i,"class",c),_[9].pageFooter?E?(E.p(_,F),F&512&&w(E,1)):(E=bt(_),E.c(),w(E,1),E.m(s,null)):E&&(G(),j(E,1,1,()=>{E=null}),D()),(!m||F&1&&d!==(d=_[0]+" "+yt))&&a(s,"class",d),_[9].sidebarRight?h?(h.p(_,F),F&512&&w(h,1)):(h=vt(_),h.c(),w(h,1),h.m(n,null)):h&&(G(),j(h,1,1,()=>{h=null}),D()),_[9].footer?b?(b.p(_,F),F&512&&w(b,1)):(b=kt(_),b.c(),w(b,1),b.m(e,null)):b&&(G(),j(b,1,1,()=>{b=null}),D()),(!m||F&256)&&a(e,"class",_[8])},i(_){m||(w(P),w(L),w(N),w(z,_),w(E),w(h),w(b),m=!0)},o(_){j(P),j(L),j(N),j(z,_),j(E),j(h),j(b),m=!1},d(_){_&&k(e),P&&P.d(),L&&L.d(),N&&N.d(),z&&z.d(_),E&&E.d(),h&&h.d(),b&&b.d(),R=!1,S()}}}const Hl="w-full h-full flex flex-col overflow-hidden",Ol="w-full h-full flex overflow-hidden",yt="flex-1 overflow-x-hidden overflow-y-auto flex flex-col",zl="flex-none overflow-x-hidden overflow-y-auto",Al="flex-none overflow-x-hidden overflow-y-auto";function Bl(t,e,l){let n,r,s,o,i,c,f,d,{$$slots:u={},$$scope:g}=e;const m=At(u);let{regionPage:R=""}=e,{slotHeader:S="z-10"}=e,{slotSidebarLeft:P="w-auto"}=e,{slotSidebarRight:L="w-auto"}=e,{slotPageHeader:N=""}=e,{slotPageContent:O=""}=e,{slotPageFooter:z=""}=e,{slotFooter:E=""}=e;function h(b){qt.call(this,t,b)}return t.$$set=b=>{l(20,e=Pe(Pe({},e),Fe(b))),"regionPage"in b&&l(0,R=b.regionPage),"slotHeader"in b&&l(10,S=b.slotHeader),"slotSidebarLeft"in b&&l(11,P=b.slotSidebarLeft),"slotSidebarRight"in b&&l(12,L=b.slotSidebarRight),"slotPageHeader"in b&&l(13,N=b.slotPageHeader),"slotPageContent"in b&&l(14,O=b.slotPageContent),"slotPageFooter"in b&&l(15,z=b.slotPageFooter),"slotFooter"in b&&l(16,E=b.slotFooter),"$$scope"in b&&l(17,g=b.$$scope)},t.$$.update=()=>{l(8,n=`${Hl} ${e.class??""}`),t.$$.dirty&1024&&l(7,r=`${S}`),t.$$.dirty&2048&&l(6,s=`${zl} ${P}`),t.$$.dirty&4096&&l(5,o=`${Al} ${L}`),t.$$.dirty&8192&&l(4,i=`${N}`),t.$$.dirty&16384&&l(3,c=`${O}`),t.$$.dirty&32768&&l(2,f=`${z}`),t.$$.dirty&65536&&l(1,d=`${E}`)},e=Fe(e),[R,d,f,c,i,o,s,r,n,m,S,P,L,N,O,z,E,g,u,h]}class Tl extends J{constructor(e){super(),I(this,e,Bl,Fl,M,{regionPage:0,slotHeader:10,slotSidebarLeft:11,slotSidebarRight:12,slotPageHeader:13,slotPageContent:14,slotPageFooter:15,slotFooter:16})}}let B=null;function Ml(){ql();const{location:t}=window,l=`${t.protocol.startsWith("https")?"wss":"ws"}://${t.host}${t.pathname}/ws`;return B=new WebSocket(l),B.onopen=()=>{console.log("Eu entrei")},B.onclose=()=>{B=null},B}function ql(){B&&(B.close(),B=null)}function Ul(t){return{c:C,m:C,p:C,i:C,o:C,d:C}}function Il(t){let e,l,n,r;return e=new wl({props:{played_cards:t[0]}}),n=new al({}),{c(){K(e.$$.fragment),l=H(),K(n.$$.fragment)},m(s,o){q(e,s,o),y(s,l,o),q(n,s,o),r=!0},p(s,o){const i={};o&1&&(i.played_cards=s[0]),e.$set(i)},i(s){r||(w(e.$$.fragment,s),w(n.$$.fragment,s),r=!0)},o(s){j(e.$$.fragment,s),j(n.$$.fragment,s),r=!1},d(s){U(e,s),s&&k(l),U(n,s)}}}function Jl(t){let e;return{c(){e=Z("...fetching cards")},m(l,n){y(l,e,n)},p:C,i:C,o:C,d(l){l&&k(e)}}}function Vl(t){let e,l,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:Jl,then:Il,catch:Ul,value:10,blocks:[,,,]};return Ae(l=t[3].initialized,r),{c(){e=ie(),r.block.c()},m(s,o){y(s,e,o),r.block.m(s,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(s,o){t=s,r.ctx=t,o&8&&l!==(l=t[3].initialized)&&Ae(l,r)||Vt(r,t,o)},i(s){n||(w(r.block),n=!0)},o(s){for(let o=0;o<3;o+=1){const i=r.blocks[o];j(i)}n=!1},d(s){s&&k(e),r.block.d(s),r.token=null,r=null}}}function Gl(t){let e,l;return e=new sl({}),{c(){K(e.$$.fragment)},m(n,r){q(e,n,r),l=!0},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){j(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function Dl(t){let e,l;return e=new Zt({props:{current_score:t[2]}}),{c(){K(e.$$.fragment)},m(n,r){q(e,n,r),l=!0},p(n,r){const s={};r&4&&(s.current_score=n[2]),e.$set(s)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){j(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function Wl(t){let e,l,n,r;return e=new Tl({props:{$$slots:{sidebarRight:[Dl],sidebarLeft:[Gl],default:[Vl]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},m(s,o){q(e,s,o),l=!0,n||(r=[te(window,"pagehide",t[5]),te(window,"pageshow",t[6])],n=!0)},p(s,[o]){const i={};o&2061&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||(w(e.$$.fragment,s),l=!0)},o(s){j(e.$$.fragment,s),l=!1},d(s){U(e,s),n=!1,le(r)}}}const Yl=2;function $l(t,e,l){let n,r,s,o;A(t,Q,g=>l(7,n=g)),A(t,ve,g=>l(8,r=g)),A(t,Re,g=>l(9,s=g)),A(t,ye,g=>l(3,o=g));let i=null,c=1,f={};f[c]=[],Ml(),B.onmessage=g=>{let m=JSON.parse(g.data);switch(m.msg_type){case"RoomNotification":switch(m.action){case"Update":ce(Re,s=m.user.UserVec,s);break}break;case"Redirect":jt(m.redirect);break;case"GameNotification":switch(m.action){case"RoundStartState":ce(ve,r=m.round_data,r),ce(Q,n=m.user_data,n),l(4,c=1),l(0,f={});break;case"PlayerTurn":ce(Q,n.hand=m.user_data.hand,n);break;case"PlayerPlayedCard":let R=f[c];(n==null?void 0:n.id)==m.user_id&&ce(Q,n.hand=n==null?void 0:n.hand.filter(S=>JSON.stringify(S)!=JSON.stringify(m.card)),n),R==null?R=[m]:R=[...R,m],l(0,f[c]=R,f),ce(Q,n.is_allowed_to_truco=!1,n);break;case"RoundWinner":l(2,i=m);break;default:console.log("Error{msg_parsed}")}default:console.log("Error:{msg_parsed}")}},Mt("ws",B);const d=()=>el(B),u=g=>tl(g);return t.$$.update=()=>{var g;t.$$.dirty&17&&((g=f[c])==null?void 0:g.length)==Yl&&l(4,c++,c),t.$$.dirty&1&&console.log(f)},[f,B,i,o,c,d,u]}class Kl extends J{constructor(e){super(),I(this,e,$l,Wl,M,{})}}new Kl({target:document.getElementById("app")});
